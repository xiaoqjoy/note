# 执行环境
##1. 执行环境的作用与功能
* 定义了**变量** 或**函数**有权访问的其它数据，并决定了他们各自的行为。
* 有一个与之关联的**变量对象**，环境中**定义的所有变量和函数**都保存在这个对象中。
* 编程代码无法直接访问这个对象，解析器在处理数据是会在后台使用它。

##2. 全局执行环境
* 宿主环境不同，执行环境完全不一样。
* Web浏览器中，全局执行环境被统一认为是***Window对象***。
* ***所有全局变量***都是作为**window对象的属性和方法**创建的。
* 执行环境所有代码执行完毕后，**环境销毁**；保存其中的**所有变量**和**函数定义**也随之**销毁**。
* 全局执行环境**应用程序退出销毁**，例如：window对象网页或浏览器关闭时销毁。
* 定义了**变量**或**函数**有权访问的其它数据，并决定了他们各自的行为。
* 有一个与之关联的  **变量对象**，环境中定义的所有变量和函数都保存在这个对象中。

##3. 函数执行环境
* 每个函数都有执行环境。当***执行流***进入一个函数时，函数的环境就会被推入一个**环境栈**中。
* 每个函数执行完后，**栈将其环境弹出**，把**控制权**返回给之前的**执行环境**。
* 代码在环境中*执行*时，会创建**变量对象**的一个**作用域链**。保证对执行环境有权访问的所有变量和函数的有序访问。
* 作用域链的前端，*始终*都是当前执行的代码所在**环境的变量对象**。
* 如果环境是**函数**，将其**活动对象**作为*变量对象*。活动对象最开始只包含一个argument对象。
* 作用域链***下一个变量对象***来自包含（外部）环境；***再下一个变量对象***则来自下一个包含环境；就这样一直延续到***全局执行环境***；**全局执行环境的变量对象始终是作用域链的最后一个对象**。

> **标识符解析**：沿着作用域链一级一级的搜索标识符的过程。搜索过程始终从作用域链的前端开始，然后逐级的往后回溯，知道找到标识符位置（如果找不到标识符，通常会导致错误的发生）。

```javascript
var color = 'blue';
function changeColor(){
	if(color === 'blue'){
		color = 'red';
	}else{
		color = 'blue';
	}
}
changeColor();
console.log('Color is now ' + color);
```

