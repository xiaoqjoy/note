function getDefualTeamLogo(e){return""==$.trim(e)?"assets/img/default.png":e}function getGameCodeName(gameCode){return eval("data_game_code_name_"+gameCode)}function getData(e){return window.matchList[e]}function setData(e,t){return window.matchList[e]=t}window.matchList={};var match_key="match_";$(function(){function e(){var e=q.join(",");moudle.connectServer("/api/match/guessing",{pageIndex:1,gameCode:z.gameCode,pageSize:4,bGameIds:e},function(e){if(void 0==e.data)return void $(".quizItem").html(template("quizItem",null));var t=(e.data.matchList.length,e.data.matchList);console.log(e.data),z.gameName=t[0].gameName,M(e),N(45395),"ow"==z.gameCode||"cf"==z.gameCode?$(".quizList .game-guesting").html(template("guess",e.data)):$(".quizList .game-guesting").html(template("quizItem",e.data));var a;for(i=0;i<e.data.matchList.length;i++)a=e.data.matchList[i],setData(match_key+a.bMatchId,a);v(".game-guesting")})}function t(e,t){$(".loaderMore").fadeIn(),moudle.cookieServer("/api/match/guessing",e,t)}function a(){moudle.connectServer("/api/common/activity-open",{menuName:"踩楼有礼,充值有礼,转盘抽奖"},function(e){e.data[0]&&$(".contentLeft").append('<a href= "'+moudle.urlConfig.url+' /eventLike/index" target="_blank"><li><span>踩楼有礼</span><i></i></li></a>'),e.data[1]&&$(".contentLeft").append('<a href= "'+moudle.urlConfig.url+' /awardCtl/index" target="_blank"><li><span>充值有礼</span><i></i></li></a>'),e.data[2]&&$(".contentLeft").append('<a href= "'+moudle.urlConfig.url+' /prizes/index" target="_blank"><li><span>转盘抽奖</span><i></i></li></a>')})}function o(e,t){moudle.cookieServer("/api/match/guess-end",e,t)}function n(){var e=$.Deferred();if(0==O)if(j&&j.page)if(j.page.pageIndex<j.page.pageCount){var a=j.page.pageIndex+1,n=q.join(","),i={gameCode:z.gameCode,pageIndex:a,pageSize:4,bGameIds:n};j.date&&(i.matchDate=j.date),t(i,d(e,function(e){e.page?j.page=e.page:j.page=null,void 0!=e.data&&(z.gameName=matchList[0].gameName,M(e),"ow"==z.gameCode||"cf"==z.gameCode?$(".quizList .game-guesting").append(template("guess",e.data)):$(".quizList .game-guesting").append(template("quizItem",e.data)),$(".loaderMore").fadeOut())}))}else e.resolve();else e.resolve();else if(1==O)if(m(B),B&&B.page)if(B.page.pageIndex<B.page.pageCount){$(".loaderMore").fadeIn();var a=B.page.pageIndex+1,i={gameCode:z.gameCode,pageIndex:a};B.date&&(i.matchDate=B.date),o(i,d(e,r))}else e.resolve();else e.resolve();return e.promise()}function l(){var e={gameCode:z.gameCode};B.date&&(e.matchDate=B.date),o(e,s)}function s(e){if(document.documentElement.scrollTop=document.body.scrollTop=0,e.page?B.page=e.page:B.page=null,void 0==e.data)return void $(".game-end .guessEndList").empty();-1!=["dota2","lol","hearthstone","csgo","kg","cos"].indexOf(z.gameCode)?e.data.templateType="lol":e.data.templateType="ow";var t=e.data;g(t),$(".game-end .guessEndList").empty();for(var a=0;a<t.matchList.length;a++){var o;o="lol"==t.templateType?template("guessEndItem_lol",t.matchList[a]):template("guessEndItem_ow",t.matchList[a]),o&&$(".game-end .guessEndList").append(o)}$(".loaderMore").fadeOut()}function d(e,t){return function(e,t){return function(a){t(a);var o=e;o&&o.resolve()}}(e,t)}function r(e){-1!=["dota2","lol","hearthstone","csgo","kg","cos"].indexOf(z.gameCode)?e.data.templateType="lol":e.data.templateType="ow";var t=e.data;g(t),e.page&&(B.page=e.page);for(var a=0;a<t.matchList.length;a++){var o;o="lol"==t.templateType?template("guessEndItem_lol",t.matchList[a]):template("guessEndItem_ow",t.matchList[a]),o&&$(".quizItem .guessEndList").append(o)}$(".loaderMore").fadeOut()}function c(e){if(document.documentElement.scrollTop=document.body.scrollTop=0,e.page?B.page=e.page:B.page=null,void 0==e.data)return void $(".game-end").empty();-1!=["dota2","lol","hearthstone","csgo","kg","cos"].indexOf(z.gameCode)?e.data.templateType="lol":e.data.templateType="ow";var t=e.data;g(t),$(".game-end").html(template("guessEnd",t)),$(".loaderMore").fadeOut(),$(".searchJC").datetimepicker({language:"zh-cn",weekStart:1,todayBtn:1,clearBtn:1,autoclose:1,format:"yyyy-mm-dd",minView:2}),$(".quizItem .dateSelect .week a").on("click",function(e){B.date=$(this).attr("date-data"),$(this).addClass("active").siblings().removeClass("active"),l()}),$(".quizItem .dateSelect .penData .searchBtn").on("click",function(e){var t=$(".penData  .myDate").val();t&&(B.date=t,l())})}function m(e){for(var t="",a=0;a<arguments.length;a++)t+=arguments[a]+"\n";if($(".log_out p").length>0){var e=$(".log_out p").text()+"\n"+t;$(".log_out p").text(e)}}function g(e){var t=e.matchDetailList,a=e.matchList;if(t&&0!=t.length&&a&&0!=a.length)for(var o=0;o<a.length;o++){for(var n=[],i=a[o].bMatchId,l=0;l<t.length;l++)i==t[l].bMatchId&&n.push(t[l]);a[o].matchDetailList=n.length?n:null}}function u(e){return 0==e?e:!e||parseInt(e)<=-1?"-":e}function p(){template.helper("endRootUrl",function(e){return moudle.urlConfig.url+e}),template.helper("lg",function(e,t){return langauge.lg(t)}),template.helper("formatDate",getFormatDateByLong),template.helper("getChinese",getChinese),template.helper("getNumOrNull",u),template.helper("getGameCodeName",getGameCodeName),template.helper("getDefualTeamLogo",getDefualTeamLogo),template.helper("judgeNull",function(e){return null==e?"../images/default.png":e}),template.helper("supple",function(e){return parseFloat(e).toFixed(2)}),template.helper("judgeClass",function(e){if("HW"==e.competitionTypeCode){if("1"==e.otherForOrder)return"大";if("2"==e.otherForOrder)return"小"}if("SD"==e.competitionTypeCode){if("1"==e.otherForOrder)return"单";if("2"==e.otherForOrder)return"双"}return""}),template.helper("jsonString",function(e){return JSON.stringify(e)}),template.helper("string",function(e){return JSON.parse(e).zh_CN}),template.helper("judgeMatch",function(e){return 0==e?"总局":-1==e?"全系列赛":"other"==e?"其他玩法":"第"+e+"局"}),template.helper("dateFormat",function(e){function t(e){return e.toString().replace(/^[0-9]{1}$/,"0"+e)}if(e){var a=new Date(1e3*parseInt(String(e).substring(0,10)));return a.getFullYear()+"-"+t(a.getMonth()+1)+"-"+t(a.getDate())+" "+t(a.getHours())+":"+t(a.getMinutes())}return"-"}),template.helper("teamAPercent",function(e){return e.teamAHeadPerMatch/(e.teamAHeadPerMatch+e.teamBHeadPerMatch)*100}),template.helper("teamBPercent",function(e){return e.teamBHeadPerMatch/(e.teamAHeadPerMatch+e.teamBHeadPerMatch)*100})}function h(){moudle.cookieServer("/api/portal/list-for-guess","",function(e){$(".gameClass").html(template("gameClass",e)),$(".gameClass").find("li:eq(0)").addClass("active")})}function f(){moudle.cookieServer("/api/match-type/list-for-guess",{gameCode:z.gameCode},function(e){$(".matchClass").html(template("matchClass",e)),$(".list li:gt(3)").hide()})}function v(e){var t=[".game-guesting",".game-end",".game-rule"];$(e).show(),m(e),t.splice(t.indexOf(e),1),m(t);for(var a=0;a<t.length;a++)$(t[a]).hide()}function b(){function t(){hhly_login.show(),hhly_login.initConfig({platformId:z.platformId,success:function(e){console.log(e);var t=e.user;console.log(t),t.channel=z._channel_.dj,moudle.cookieServer("/api/user/login-platform",t,function(e){console.log(e),D()}),$("#hhly_sso_login_mask").fadeOut(100),$("#hhly_sso_login").slideUp(200),$("body").height($(window).height()).css({overflow:""}),console.log(document.cookie)}})}$(".matchClass").delegate("li a","click",function(){var t=$(this).find(".icon_radio"),a=$(this).attr("data-id");q.push(a),""==a&&(q=[]);var o=$(this).parents("li").siblings().eq(0);t.addClass("selected"),$(o[0]).find(".allMatch").removeClass("selected"),t.hasClass("allMatch")&&(t.addClass("selected"),$(this).parents("li").siblings().find(".icon_radio").removeClass("selected")),e()}),$(".guessStateTab a").click(function(){var t=$(this).find("span").html();$(this).addClass("active").siblings().removeClass("active"),O=$(this).index(),"玩法介绍"==t?($(".game-rule").html(template("guessRule",null)),v(".game-rule")):"竞猜中"==t?(e(),v(".game-guesting")):(B.date=null,v(".game-end"),o({gameCode:z.gameCode,dateStatus:1},c))}),$(".quizList .game-guesting").delegate(".quizItem li a","click",function(){var e=JSON.parse($(this).attr("data-cache"));e.gameName=z.gameName,e.gameCode=z.gameCode;var a={data:e};moudle.cookieServer("api/user/has-login","",function(e){300==e.status?t():(D(),$(".bet").html(template("bet",a)),$(".mask").show(),$(".popup_bet").show(),$(".popup_bet").animate({top:"27%"},300))})}),$(".bet").delegate(".closePopup","click",function(){I()}),$(".bet").delegate(".betCoin","click",function(){$(this).attr("placeholder","")}),$(".bet").delegate(".betBtn","click",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-code"),a=$(this).parent().siblings(".betCount").find(".betCoin").val();return $(".betCoin").val()?$(".betCoin").val()<10?void Util.popup.show("最小下注金额10金币"):(moudle.cookieServer("api/bet/save",{competitionId:e,money:a,gameCode:t},function(e){console.log(e),200==e.status&&(Util.popup.show("投注成功"),D()),Util.popup.show(e.msg)}),void I()):void Util.popup.show("请输入金额")}),$(".bet").delegate("input.betCoin","keyup",function(){var e=$(".odds").html(),t=$(this).val();$(this).val(_(t)),$(".pre-win").text(Math.round(Number(t)*Number(e)*100)/100)}),$(window).scroll(function(){$(document).scrollTop(),$(document).height(),$(window).height(),document.body.scrollTop<80?$(".scroll_box").css("top","75px"):$(".scroll_box").css("top","-8px")}),$(".list li:gt(3)").hide(),$(".moreDate").click(function(){$(".list li:gt(3)").is(":visible")?$(this).find(".icon_more").removeClass("up"):$(this).find(".icon_more").addClass("up"),$(".list li:gt(3)").slideToggle("normal")}),$(".guess_box .guessItem:odd").addClass("oddcss"),$(".guess_box .guessItem:even").addClass("evencss"),$(".headTop").delegate(".loginBtn","click",function(){console.log(z),t()}),$(".headTop").delegate(".sign","click",function(){if(signMoudle.isSigned())return!1;moudle.cookieServer("api/sign/list","",function(e){console.log(e),$(".sign_popup").html(template("sign",e)),$(".calendar").signCalander({year:e.data.year,month:e.data.month-1,gou:moudle.urlConfig.url+"/images/sign_ca/ca_gou.png"})})}),$(".sign_popup").delegate(".act_close","click",function(){$(".sign_popup").html("")}),$(".headTop").delegate(".exitLogin","click",C)}function C(){moudle.cookieServer("/api/user/logout","",function(){T(),D()})}function v(e){var t=[".game-guesting",".game-end",".game-rule"];$(e).show(),m(e),t.splice(t.indexOf(e),1),m(t);for(var a=0;a<t.length;a++)$(t[a]).hide()}function I(){$(".guess_box li a").removeClass("active"),$(".popup_bet").animate({top:"106%"},300,function(){$(this).css("top","-57%"),$(".popup_bet").hide(),$(".bet").html(""),$(".mask").hide()}),$("input.betCoin").val("")}function _(e){return e.replace(/^0+|[\D]+/g,"").substr(0,5)}function y(){$(".quizList").delegate(".btn_analyse","click",function(e){var t=$(e.currentTarget),a=t.attr("data-teamAName"),o=t.attr("data-teamBName"),n=t.attr("data-code"),i=t.attr("data-aid"),l=t.attr("data-bid");moudle.cookieServer("/api/match/team-compare",{teamAId:i,teamBId:l,gameCode:n},function(e){var n=e.data.requiredBackField.split(",");e.data.teamAName=a,e.data.teamBName=o,e.data.requiredBackField=n;for(var i=n.length,l=0;l<i;l++)"teamAHeadPerMatch"==n[l]&&(e.data.tHeadPerMatch=!0),"teamAWinRate"==n[l]&&(e.data.winRate=!0),"teamAFirstBigDragonRate"==n[l]&&(e.data.DragonRate=!0),"teamAFirstTowerRate"==n[l]&&(e.data.TowerRate=!0),"teamAFirstBloodRate"==n[l]&&(e.data.BloodRate=!0);t.prev().html(template("analyseBox",e)),t.parent().hasClass("active")?(t.parent().removeClass("active"),w(t)):(x(),t.parent().addClass("active"),k(t))})}),$(".match_analyse_box,.popup_bet,.peilv,.mask").click(function(){return!1}),$("body").click(function(e){evt=event.srcElement?event.srcElement:event.target,$(evt).hasClass("btn_analyse")||$(evt).parent().hasClass("btn_analyse")||x()})}function k(e){e.siblings(".lit-analysebox").animate({width:"245px"},"fast",function(){e.find(".arrRight").hide(),e.find(".arrLeft").show()})}function w(e){e.find(".arrRight").show(),e.find(".arrLeft").hide(),e.siblings(".lit-analysebox").animate({width:"0px"})}function x(){$(".btn_analyse").parent().removeClass("active"),$(".btn_analyse").find(".arrRight").show(),$(".btn_analyse").find(".arrLeft").hide(),$(".btn_analyse").siblings(".lit-analysebox").animate({width:"0px"})}function L(){$(".gameClass ").delegate("li","click",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).attr("data-gameCode");q=[],z.gameCode=t,e(),f()})}function T(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;expires="+new Date(0).toUTCString()}function S(){moudle.cookieServer("/api/common/getPlatformId","",function(e){z.platformId=e.data})}function D(){var e={data:{}};moudle.cookieServer("api/user/info","",function(t){e.data[0]=t,$(".headTop").html(template("headTop",e)),200===t.status&&moudle.cookieServer("api/sign/has-sign-today","",function(t){e.data[1]=t,$(".headTop").html(template("headTop",e))})})}function M(e){for(var t,a,o,n,i=e.data.matchList,l=e.data.matchDetailList,s=e.data.competitionList,d={},r=0;r<s.length;r++)t=s[r],t.competitionTypeName=JSON.parse(t.competitionTypeName).zh_CN,d[t.competitionId]=t;for(var c=0;c<i.length;c++){n=i[c],n.obj1={},a="",o=[];for(var m=0;m<l.length;m++)if(i[c].bMatchId===l[m].bMatchId){i[c].obj1[l[m].bo]=[];for(var g,u,p,h=0;h<s.length;h++)if(g=s[h],u=null,l[m].matchDetailId==s[h].matchDetailId){if(!d[g.brotherId]||a.indexOf(g.competitionId+"")>=0||a.indexOf(g.brotherId+"")>=0)continue;if(g.teamId<="0"){p=g.competitionId<g.brotherId?[g,d[g.brotherId]]:[d[g.brotherId],g],o.push(p),a+=g.competitionId+",";continue}u=g.competitionId<g.brotherId?[g,d[g.brotherId]]:[d[g.brotherId],g],a+=g.competitionId+",",i[c].obj1[l[m].bo].push(u)}0==i[c].obj1[l[m].bo].length&&delete i[c].obj1[l[m].bo]}o&&o.length>0&&(n.obj1.other=o)}}function N(e){moudle.connectServer("/api/competition/poll",{matchId:e,version:0},function(t){function a(){var e={data:{matchList:[s]}};console.log(e),"ow"==s.gameCode||"cf"==s.gameCode?$('.quizItem[data-id="'+s.bMatchId+'"]').html(template("guess",e.data)):$('.quizItem[data-id="'+s.bMatchId+'"]').html(template("quizItem",e.data))}if(console.log(t),t.data){for(var o,n,i,l,s=getData(match_key+e),d={},r=[],c=0;c<t.data.competitionList.length;c++)i=t.data.competitionList[c],d[i.competitionId]=i;console.log(i),console.log(s);for(var m in s.obj1){n=s.obj1[m];for(var g in n){o=n[g],console.log(o.length),console.log(o);for(var u=0;u<o.length;u++)l=o[u],i=d[l.competitionId],l.odds>i.odds?(o[u]=i,r.push(i),$("#"+i.competitionId).parents("li").append('<i class="arrow tips-down" style="display: block;">↓</i>'),console.log(">>>>>>>>>>>>>>>>>>>>>>"+i.competitionId)):l.odds<i.odds?(o[u]=i,r.push(i),$("#"+i.competitionId).parents("li").append('<i class="arrow tips-up" style="display: block;">↑</i>'),console.log($("#"+i.competitionId).html()),console.log("<<<<<<<<<<<<<<<<<<<<<<<<<"+i.competitionId)):console.log("xxxxxxxxx==================")}}setTimeout(a,5e3)}})}var z={gameCode:"lol",gameName:"lol",_channel_:{dj:"P00001",live:"P00002",platform:"P00003"}},q=[],O=0,B={},j={};!function(){p(),e(),Util.scrollsTop(n),h(),f(),b(),y(),L(),S(),D(),a()}()});
//# sourceMappingURL=../maps/guess.js.map
