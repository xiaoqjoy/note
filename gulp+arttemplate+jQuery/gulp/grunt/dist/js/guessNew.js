$(function(){function e(e){return $.each(e.data.matchList,function(t,a){var o=[];$.each(e.data.matchDetailList,function(t,i){var n=i.bMatchId,p=i.matchDetailId,l=[],s={},m=[];n==a.bMatchId&&(i.teamALogo=a.teamALogo,i.teamBLogo=a.teamBLogo,i.teamAName=a.teamAName,i.teamBName=a.teamBName,i.scoreA=a.scoreA,i.scoreB=a.scoreB,o.push(i)),$.each(e.data.funCompetitionList,function(e,t){t.matchDetailId==p&&l.push(t)}),i.fun=l,$.each(i.fun,function(e,t){4==t.competitionObject&&(s[t.competitionCode]||(s[t.competitionCode]=[]),s[t.competitionCode].push(t))});for(var t in s)m.push(s[t]);i.otherGuess=m}),a.matchDetail=o}),console.log(e),e}function t(e){if($(".compensate span").html()&&$(".bet_limit input").val()){var t=$(".compensate span").html()*$(".bet_limit input").val();$(".popup-teammember .income span").html(t.toFixed(2))}}function a(t){$(".new_play").html(template("new_play",e(t)))}function o(){hhly_login.show(),hhly_login.initConfig({platformId:s.platformId,success:function(e){var t=e.user;t.channel=s._channel_.dj,moudle.cookieServer("/api/user/login-platform",t,function(e){p()}),$("#hhly_sso_login_mask").fadeOut(100),$("#hhly_sso_login").slideUp(200),$("body").height($(window).height()).css({overflow:""})}})}function i(){moudle.cookieServer("/api/user/logout","",function(){n();var e={status:300};$(".headTop").html(template("headTop",e))})}function n(){var e=["user_lyy_com","regTime_lyy_com"],t=document.cookie.match(/[^ =;]+(?=\=)/g),a="";if(a=document.domain.replace(/(.*)\.(\w+\.com)/,"$2"),t)for(var o=t.length;o--;)-1!=e.indexOf(t[o])?document.cookie=t[o]+"=0;domain="+a+";expires="+new Date(0).toUTCString():document.cookie=t[o]+"=0;expires="+new Date(0).toUTCString()}function p(){moudle.cookieServer("api/user/info","",function(e){$(".headTop").html(template("headTop",e))})}function p(){moudle.cookieServer("api/user/info","",function(e){$(".headTop").html(template("headTop",e))})}function l(e){for(var t,a,o,i=e.data.matchDetailList,n=e.data.funCompetitionList,p={},l={},s=0;s<i.length;s++)a=i[s],l[a.matchDetailId]=a;for(var s=0;s<n.length;s++)t=n[s],p[t.competitionCode+t.matchDetailId]=t;for(var s=0;s<i.length;s++)if(a=i[s],o=a.funSingleVO,a.funSingleVO&&(t=p["DMVP"+a.matchDetailId],t&&(t.value=[o.mvp]),t=p["DDMP"+a.matchDetailId],t&&(t.value=o.maxDeathTimesPlayerList),t=p["DKMP"+a.matchDetailId],t&&(t.value=o.maxKillTimesPlayerList),t=p["DSMP"+a.matchDetailId],t&&(t.value=o.maxHurtPlayerList),t=p["DMMP"+a.matchDetailId],t&&(t.value=o.maxMoneyPlayerList),t=p["DMW"+a.matchDetailId],t&&(t.value=o.breakPosition),t=p["DMCK"+a.matchDetailId],t&&(t.value=o.maxComboKill),t=p["DTIME"+a.matchDetailId],t&&(t.matchTime1=o.matchTime1,t.matchTime2=o.matchTime2),(t=p["ZSW"+a.matchDetailId])&&a.funSingleVO.bonusPool)){t.bonusPool=a.funSingleVO.bonusPool.bonusPoolA,t.teamId=a.teamAId;var m=$.extend({},t);m.bonusPool=a.funSingleVO.bonusPool.bonusPoolB,m.teamId=a.teamBId,n.push(m)}return e}var s={_channel_:{dj:"P00001",live:"P00002",platform:"P00003"}};template.helper("deal_breakPosition",function(e){return["上路","中路","下路"][e-1]}),template.helper("deal_maxComboKill",function(e){return["无多杀","双杀","三杀","四杀","五杀"][e-1]}),template.helper("time",function(e){return parseInt(e/60)}),template.helper("boCN",function(e){return"第"+["一","二","三","四","五","六","七","八","九"][e-1]+"局"}),template.helper("dateChange",function(e){return moudle.formatTime(new Date(e)).date+" "+moudle.formatTime(new Date(e)).clock}),function(){moudle.cookieServer("/api/common/getPlatformId","",function(e){s.platformId=e.data})}(),p(),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){a(e)}),moudle.ajax({url:"/api/match/guess-end",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(t){l(t),$(".game-end").html(template("new_play_end",e(t)))}),$(".guessPage").on("click",".select-title span",function(){$(this).addClass("active").siblings().removeClass("active"),$(this).hasClass("title-players")?($(this).parent().parent().find(".players").show().find(".intro").html("选手竞猜"),$(this).parent().parent().find(".others").hide()):($(this).parent().parent().find(".others").show().find(".intro").html("其他玩法"),$(this).parent().parent().find(".players").hide())}),$(".guessPage").on("click",".new_play .guess_list li input",function(){var e=$(this).parent().attr("data-competitionCode"),t=$(this).parent().attr("data-matchDetailId"),a=$(this).siblings("span").html();moudle.cookieServer("api/user/has-login","",function(i){200==i.status?($("body").css("overflow-y","hidden"),moudle.ajax({url:"/api/competition/single-player-list",type:"POST",data:{guessCode:e,matchDetailId:t}},function(e){$(".popup-teammember").html(template("popup-teammember",e)),$(".popup-teammember .title").html(a),$(".popup-teammember,.mask").show(),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup-teammember .balance span").html(e.data)})})):o()})}),$(".guessPage").on("click"," .popup-teammember .close",function(){$("body").css("overflow-y","scroll"),$(".popup-teammember,.mask").hide()}),$(".guessPage").on("click",".popup-teammember .select_popup li",function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("data-playerImg"),a=$(this).attr("data-odds"),o=$(this).attr("data-competitionid"),i=$(this).attr("data-playerName");$(".chooseplayer img").attr("src",e),$(".chooseplayer p").html(i),$(".chooseplayer").attr("data-competitionid",o),$(".compensate span").html(a),t()}),$(".guessPage").on("keyup",".popup-teammember .bet_limit input",function(){t()}),$(".guessPage").on("click",".popup-teammember .betBtn",function(){var e=$(".popup-teammember .chooseplayer").attr("data-competitionid"),t=($(".popup-teammember .compensate span").html(),$(".bet_limit input").val());$(".compensate span").html()?$(".bet_limit input").val()?$(".bet_limit input").val()<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:"lol",channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup-teammember .balance span").html(e.data)}),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){a(e)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币"):Util.popup.show("请选择选手")}),$(".guessPage").on("click"," .guessStateTab a",function(){$(this).addClass("active").siblings().removeClass("active"),$(this).hasClass("gsing")?($(".game-guesting").addClass("active"),$(".game-end,.game-rule").removeClass("active")):$(this).hasClass("gsend")?($(".game-end").addClass("active"),$(".game-guesting,.game-rule").removeClass("active")):($(".game-rule").addClass("active"),$(".game-guesting,.game-end").removeClass("active"))}),$(".guessPage").on("click",".icon_intro",function(){$(".gsrule").addClass("active").siblings().removeClass("active"),$(".game-rule").addClass("active"),$("body").scrollTop(0),$(".game-guesting,.game-end").removeClass("active")}),$(".guessPage").on("click",".new_play .guess-list .ratio-list",function(){var e=$(this).attr("data-competitionId"),t=$(this).parent().parent().parent().parent().parent().parent(),a=$(this).parent().parent().find(".top_title").html(),i=$(this).parent().parent().parent().parent().find(".first_play").html(),n=$(this).find(".betItem").html(),p=$(this).find(".betbilv").html(),l=t.find(".matchTitle").html(),s=t.attr("data-gameName")+"  "+l+"  |  "+t.attr("data-teamAName")+"  VS  "+t.attr("data-teamBName")+" "+i;moudle.cookieServer("api/user/has-login","",function(t){200==t.status?($(".popup_old .betMatch").html(s).attr("data-competitionId",e),$(".popup_old .betObject .betItem").html(a+" "+n),$(".popup_old .betbilv").html(p),$(".popup_old").animate({top:"27%"},300),$(".popup_old,.mask").show(),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_old .balance span").html(e.data)})):o()})}),$(".guessPage").on("keyup",".popup_old .betCoin",function(){var e=$(this).val()*$(".betbilv").html();$(".popup_old .canwin").html(e.toFixed(2))}),$(".guessPage").on("click",".popup_old .betBtn",function(){var e=$(".popup_old .betMatch").attr("data-competitionid"),t=$(".popup_old .betCoin").val();t?t<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:"lol",channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_old .balance span").html(e.data)}),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){a(e)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币")}),$(".guessPage").on("click",".popup_old .closePopup",function(){$(".guess_box li a").removeClass("active"),$(".popup_old").animate({top:"106%"},300,function(){$(this).css("top","-57%"),$(".popup_old").hide()}),$(".mask").hide(),$("input.betCoin").val("")}),$(".guessPage").on("click",".new_play .bet input",function(){var e=$(this).parent().parent().parent().parent(),t=e.find(".matchTitle").html(),a=$(this).parent().attr("data-competitionId"),i=$(this).parent().siblings(".bet_detail").find("span").html(),n=$(this).siblings(".teamName").html(),p=e.attr("data-gameName")+"  "+t+"  |  "+e.attr("data-teamAName")+"  VS  "+e.attr("data-teamBName")+"  总局";moudle.cookieServer("api/user/has-login","",function(e){200==e.status?($("body").css("overflow-y","hidden"),$(".popup_bet_new .betMatch").html(p).attr("data-competitionId",a),$(".popup_bet_new .betWin span").html(n),$(".popup_bet_new .betObject span").html(i),$(".popup_bet_new,.mask").show(),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_bet_new .balance span").html(e.data)})):o()})}),$(".guessPage").on("click",".popup_bet_new .closePopup",function(){$("body").css("overflow-y","scroll"),$(".popup_bet_new,.mask").hide()}),$(".guessPage").on("click",".popup_bet_new .betBtn",function(){var e=$(".popup_bet_new .betMatch").attr("data-competitionid"),t=$(".popup_bet_new .betCoin").val();t?t<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:"lol",channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_bet_new .balance span").html(e.data)}),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){a(e);var t=$(".new_play .bet input").parent().siblings(".bet_detail").find("span").html();$(".popup_bet_new .betObject span").html(t)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币")}),$(".guessPage").on("click",".exitLogin",i),$(".guessPage").on("click",".loginBtn",o),$(".guessPage").on("click",".playerName i",function(){$(".popup_mutiplayers").show(),$(".popup_mutiplayers .header .title").html($(this).parent().next().html())}),$(".guessPage").on("click",".popup_mutiplayers .closePopup",function(){$(".popup_mutiplayers").hide()})});
//# sourceMappingURL=../maps/guessNew.js.map
