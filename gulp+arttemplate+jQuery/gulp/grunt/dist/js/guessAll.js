$(function(){function e(){u("load-loadGuess");var e=ae.join(",");moudle.cookieServer("api/match/guessing",{pageIndex:1,gameCode:te.gameCode,pageSize:4,bGameIds:e},function(e){if(e.page?ne.page=e.page:ne.page=null,void 0==e.data)return void $(".quizList .game-guesting").empty();$(".quizList .game-guesting").empty();var t=e.data.matchList,o=e.data.matchDetailList,i=e.data.competitionList;te.gameName=t[0].gameName,a(t,o,i),-1!=["lol","dota2"].indexOf(te.gameCode)&&(W(e),$(".quizList .game-guesting").append(template("new_play",e))),u(e.data),"ow"==te.gameCode||"cf"==te.gameCode?$(".quizList .game-guesting").append(template("guess",e.data)):$(".quizList .game-guesting").append(template("quizItem",e.data))})}function t(e,t){$(".loaderMore").fadeIn(),moudle.cookieServer("api/match/guessing",e,t)}function a(e,t,a){for(var o,i,n,l,s={},p=0;p<a.length;p++)o=a[p],o.competitionTypeName=JSON.parse(o.competitionTypeName).zh_CN,s[o.competitionId]=o;for(var r=0;r<e.length;r++){l=e[r],l.obj1={},i="",n=[];for(var m=0;m<t.length;m++)if(e[r].bMatchId===t[m].bMatchId){e[r].obj1[t[m].bo]=[];for(var d,u,c,h=0;h<a.length;h++)if(d=a[h],u=null,t[m].matchDetailId==a[h].matchDetailId){if(!s[d.brotherId]||i.indexOf(d.competitionId+"")>=0||i.indexOf(d.brotherId+"")>=0)continue;if(d.teamId<="0"){c=d.competitionId<d.brotherId?[d,s[d.brotherId]]:[s[d.brotherId],d],n.push(c),i+=d.competitionId+",";continue}u=d.competitionId<d.brotherId?[d,s[d.brotherId]]:[s[d.brotherId],d],i+=d.competitionId+",",e[r].obj1[t[m].bo].push(u)}0==e[r].obj1[t[m].bo].length&&delete e[r].obj1[t[m].bo]}n&&n.length>0&&(l.obj1.other=n)}}function o(e){for(var t,a,o,i,n=e.data.matchList,l=e.data.matchDetailList,s=e.data.competitionList,p={},r=0;r<s.length;r++)t=s[r],t.competitionTypeName=JSON.parse(t.competitionTypeName).zh_CN,p[t.competitionId]=t;for(var m=0;m<n.length;m++){i=n[m],i.obj1={},a="",o=[];for(var d=0;d<l.length;d++)if(n[m].bMatchId===l[d].bMatchId){n[m].obj1[l[d].bo]=[];for(var u,c,h,g=0;g<s.length;g++)if(u=s[g],c=null,l[d].matchDetailId==s[g].matchDetailId){if(!p[u.brotherId]||a.indexOf(u.competitionId+"")>=0||a.indexOf(u.brotherId+"")>=0)continue;if(u.teamId<="0"){h=u.competitionId<u.brotherId?[u,p[u.brotherId]]:[p[u.brotherId],u],o.push(h),a+=u.competitionId+",";continue}c=u.competitionId<u.brotherId?[u,p[u.brotherId]]:[p[u.brotherId],u],a+=u.competitionId+",",n[m].obj1[l[d].bo].push(c)}0==n[m].obj1[l[d].bo].length&&delete n[m].obj1[l[d].bo]}o&&o.length>0&&(i.obj1.other=o)}}function i(e,t){moudle.cookieServer("api/match/guess-end",e,t)}function n(e,t){moudle.cookieServer("api/match/fun-all/guess-end",e,t)}function l(){u("down down");var e=$.Deferred();if(0==oe)if(ne&&ne.page)if(ne.page.pageIndex<ne.page.pageCount){var o=ne.page.pageIndex+1,n=ae.join(","),l={gameCode:te.gameCode,pageIndex:o,pageSize:4,bGameIds:n};ne.date&&(l.matchDate=ne.date),t(l,r(e,function(e){if(e.page?ne.page=e.page:ne.page=null,void 0!=e.data){var t=e.data.matchList,o=e.data.matchDetailList,i=e.data.competitionList;te.gameName=t[0].gameName,a(t,o,i),"ow"==te.gameCode||"cf"==te.gameCode?$(".quizList .game-guesting").append(template("guess",e.data)):$(".quizList .game-guesting").append(template("quizItem",e.data)),$(".loaderMore").fadeOut()}}))}else e.resolve();else e.resolve();else if(1==oe)if(u(ie),ie&&ie.page)if(ie.page.pageIndex<ie.page.pageCount){$(".loaderMore").fadeIn();var o=ie.page.pageIndex+1,l={gameCode:te.gameCode,pageIndex:o};ie.date&&(l.matchDate=ie.date),i(l,r(e,m))}else e.resolve();else e.resolve();return e.promise()}function s(){var e={gameCode:te.gameCode};ie.date&&(e.matchDate=ie.date),i(e,p)}function p(e){if(document.documentElement.scrollTop=document.body.scrollTop=0,e.page?ie.page=e.page:ie.page=null,void 0==e.data)return void $(".game-end .guessEndList").empty();-1!=["dota2","lol","hearthstone","csgo","kg","cos"].indexOf(te.gameCode)?e.data.templateType="lol":e.data.templateType="ow";var t=e.data;c(t),$(".game-end .guessEndList").empty(),"lol"!=te.gameCode&&"dota2"!=te.gameCode||(Y(e),W(e),$(".quizList .game-end").append(template("new_play_end",e)));for(var a=0;a<t.matchList.length;a++){var o;o="lol"==t.templateType?template("guessEndItem_lol",t.matchList[a]):template("guessEndItem_ow",t.matchList[a]),o&&$(".game-end .guessEndList").append(o)}$(".loaderMore").fadeOut()}function r(e,t){return function(e,t){return function(a){t(a);var o=e;o&&o.resolve()}}(e,t)}function m(e){-1!=["dota2","lol","hearthstone","csgo","kg","cos"].indexOf(te.gameCode)?e.data.templateType="lol":e.data.templateType="ow";var t=e.data;c(t),e.page&&(ie.page=e.page);for(var a=0;a<t.matchList.length;a++){var o;o="lol"==t.templateType?template("guessEndItem_lol",t.matchList[a]):template("guessEndItem_ow",t.matchList[a]),o&&$(".quizItem .guessEndList").append(o)}$(".loaderMore").fadeOut()}function d(e){if(document.documentElement.scrollTop=document.body.scrollTop=0,e.page?ie.page=e.page:ie.page=null,void 0==e.data)return void $(".game-end").empty();-1!=["dota2","lol","hearthstone","csgo","kg","cos"].indexOf(te.gameCode)?e.data.templateType="lol":e.data.templateType="ow";var t=e.data;c(t),$(".game-end").html(template("guessEnd",t)),$(".loaderMore").fadeOut(),$(".searchJC").datetimepicker({language:"zh-cn",weekStart:1,todayBtn:1,clearBtn:1,autoclose:1,format:"yyyy-mm-dd",minView:2}),$(".quizItem .dateSelect .week a").on("click",function(e){ie.date=$(this).attr("date-data"),$(this).addClass("active").siblings().removeClass("active"),s()}),$(".quizItem .dateSelect .penData .searchBtn").on("click",function(e){var t=$(".penData  .myDate").val();t&&(ie.date=t,s())})}function u(e){X()||console.log.apply(null,arguments);for(var t="",a=0;a<arguments.length;a++)t+=arguments[a]+"\n";if($(".log_out p").length>0){var e=$(".log_out p").text()+"\n"+t;$(".log_out p").text(e)}}function c(e){var t=e.matchDetailList,a=e.matchList;if(t&&0!=t.length&&a&&0!=a.length)for(var o=0;o<a.length;o++){for(var i=[],n=a[o].bMatchId,l=0;l<t.length;l++)n==t[l].bMatchId&&i.push(t[l]);a[o].matchDetailList=i.length?i:null}}function h(e){return 0==e?e:!e||parseInt(e)<=-1?"-":e}function g(e){var t="http://192.168.74.155:8011/static/lol/"+e;return-1!=e.indexOf("http://")?e:t}function f(e){var t="http://192.168.74.155:8011/static/dota2/"+e;return-1!=e.indexOf("http://")?e:t}function v(){template.helper("log",function(e){return u(e),"log"}),template.helper("endRootUrl",function(e){return moudle.urlConfig.url+e}),template.helper("lol_img",g),template.helper("dota_img",f),template.helper("lg",function(e,t){return lg.lg(t)}),template.helper("formatDate",getFormatDateByLong),template.helper("getChinese",b),template.helper("getNumOrNull",h),template.helper("getGameCodeName",C),template.helper("getDefualTeamLogo",_),template.helper("judgeNull",function(e){return null==e?"../images/default.png":e}),template.helper("supple",function(e){return parseFloat(e).toFixed(2)}),template.helper("judgeClass",function(e){if("HW"==e.competitionTypeCode){if("1"==e.otherForOrder)return"大";if("2"==e.otherForOrder)return"小"}if("SD"==e.competitionTypeCode){if("1"==e.otherForOrder)return"单";if("2"==e.otherForOrder)return"双"}return""}),template.helper("jsonString",function(e){return JSON.stringify(e)}),template.helper("string",function(e){return JSON.parse(e).zh_CN}),template.helper("judgeMatch",function(e){return 0==e?"总局":-1==e?"全系列赛":"other"==e?"其他玩法":"第"+e+"局"}),template.helper("dateFormat",function(e){function t(e){return e.toString().replace(/^[0-9]{1}$/,"0"+e)}if(e){var a=new Date(1e3*parseInt(String(e).substring(0,10)));return a.getFullYear()+"-"+t(a.getMonth()+1)+"-"+t(a.getDate())+" "+t(a.getHours())+":"+t(a.getMinutes())}return"-"}),template.helper("teamAPercent",function(e){return e.teamAHeadPerMatch/(e.teamAHeadPerMatch+e.teamBHeadPerMatch)*100}),template.helper("teamBPercent",function(e){return e.teamBHeadPerMatch/(e.teamAHeadPerMatch+e.teamBHeadPerMatch)*100}),template.helper("boCN",function(e){return"第"+["一","二","三","四","五","六","七","八","九"][e-1]+"局"}),template.helper("dateChange",function(e){return moudle.formatTime(new Date(e)).date+" "+moudle.formatTime(new Date(e)).clock}),template.helper("deal_breakPosition",function(e){return["上路","中路","下路"][e-1]}),template.helper("deal_maxComboKill",function(e){return["无多杀","双杀","三杀","四杀","五杀"][e-1]}),template.helper("time",function(e){return parseInt(e/60)})}function b(e){switch(parseInt(e)){case 1:return lg.gjh.data_words_di+lg.gjh.match_number_one+lg.gjh.data_words_ju;case 2:return lg.gjh.data_words_di+lg.gjh.match_number_two+lg.gjh.data_words_ju;case 3:return lg.gjh.data_words_di+lg.gjh.match_number_three+lg.gjh.data_words_ju;case 4:return lg.gjh.data_words_di+lg.gjh.match_number_four+lg.gjh.data_words_ju;case 5:return lg.gjh.data_words_di+lg.gjh.match_number_five+lg.gjh.data_words_ju;case 0:return lg.gjh.match_number_total+lg.gjh.data_words_ju}}function _(e){return""==$.trim(e)?"assets/img/default.png":e}function C(e){return lg.gjh["data_game_code_name_"+e]}function y(){moudle.cookieServer("api/portal/list-for-guess","",function(e){$(".gameClass").html(template("gameClass",e)),$(".gameClass").find("li:eq(0)").trigger("click")})}function I(){moudle.cookieServer("api/match-type/list-for-guess",{gameCode:te.gameCode},function(e){$(".matchClass").html(template("matchClass",e)),$(".list li:gt(3)").hide()})}function w(){ie.date=null,M(".game-end"),i({gameCode:te.gameCode,dateStatus:1},d)}function k(){ie.date=null,M(".game-end"),$(".game-end").empty(),n({gameCode:te.gameCode,dateStatus:1},x)}function x(e){u("fullEndDataBack"),u(e);var t=e.data.matchDetailList,a=e.data.matchList,o=e.data.funCompetitionList,i=[,"hero","team","player","other"];if(!t||!o)return void $(".game-end").empty();for(var n=0;n<t.length;n++){var l=t[n];for(var s in l.fieldValues)for(var p in le)le[p]==s&&-1!=pe.indexOf(p)&&l.fieldValues[s].length>0&&(u(s,l.fieldValues[s]),"lol"==te.gameCode&&(l.fieldValues[s][0].icon=g(l.fieldValues[s][0].icon)),"dota2"==te.gameCode&&(l.fieldValues[s][0].icon=f(l.fieldValues[s][0].icon)),l.fieldValues[s][0].name=JSON.parse(l.fieldValues[s][0].name))}for(var r=0;r<a.length;r++){for(var m={hero:[],team:[],player:[],other:[]},d=0;d<o.length;d++){var c=o[d].competitionCode;if(a[r].matchDetailId==o[d].matchDetailId){-1!=pe.indexOf(c)&&m.hero.push(o[d]),-1!=re.indexOf(c)&&m.team.push(o[d]),-1!=se.indexOf(c)&&m.player.push(o[d]),-1!=me.indexOf(c)&&m.other.push(o[d]);for(var h=[],n=0;n<t.length;n++)t[n].matchId==a[r].matchId&&(h=t[n].fieldValues[le[o[d].competitionCode]]);o[d].fieldValues=h}}for(var v=1;v<i.length;v++)!m.act&&m[i[v]].length>0&&(m.act=i[v]);a[r].matchDetailList=m}var b=template("new_play_all_end",e.data);$(".game-end").html(b),u(e)}function P(){$(".quizList ").on("click",".game-end .new_play .list li",function(e){$(this).addClass("active").siblings().removeClass("active");var t=$(this).index();$(this).parent().parent().find(".panel > div").each(function(e,a){e==t?$(this).removeClass("hide"):$(this).addClass("hide")})})}function D(){$(".matchClass").delegate("li a","click",function(){var t=$(this).find(".icon_radio"),a=$(this).attr("data-id");ae.push(a),""==a&&(ae=[]);var o=$(this).parents("li").siblings().eq(0);t.addClass("selected"),$(o[0]).find(".allMatch").removeClass("selected"),t.hasClass("allMatch")&&(t.addClass("selected"),$(this).parents("li").siblings().find(".icon_radio").removeClass("selected")),e()}),$(".guessStateTab a").click(function(){var t=$(this).find("span").html();$(this).addClass("active").siblings().removeClass("active"),oe=$(this).index(),"玩法介绍"==t?($(".game-rule").html(template("guessRule",null)),M(".game-rule")):"竞猜中"==t?(M(".game-guesting"),1==te.singleAll?e():z()):1==te.singleAll?w():k()}),$(".quizList .game-guesting").delegate(".quizItem li a","click",function(){var e=JSON.parse($(this).attr("data-cache"));e.gameName=te.gameName,e.gameCode=te.gameCode;var t={data:e};moudle.cookieServer("api/user/has-login","",function(e){300==e.status?T():(R(),$(".guessPage > .bet").html(template("bet",t)),$(".mask").show(),$(".guessPage > .bet .popup_bet").show(),$(".guessPage > .bet .popup_bet").animate({top:"27%"},300))})}),$(".bet").delegate(".closePopup","click",function(){L()}),$(".bet").delegate(".betCoin","click",function(){$(this).attr("placeholder","")}),$(".bet").delegate(".betBtn","click",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-code"),a=$(this).parent().siblings(".betCount").find(".betCoin").val();return $(".betCoin").val()?$(".betCoin").val()<10?void Util.popup.show("最小下注金额10金币"):(moudle.cookieServer("api/bet/save",{competitionId:e,money:a,gameCode:t},function(e){200==e.status&&(Util.popup.show("投注成功"),R()),Util.popup.show(e.msg)}),void L()):void Util.popup.show("请输入金额")}),$(".bet").delegate("input.betCoin","keyup",function(){var e=$(".odds").html(),t=$(this).val();$(this).val(S(t)),$(".pre-win").text(Math.round(Number(t)*Number(e)*100)/100)}),$(window).scroll(function(){$(document).scrollTop(),$(document).height(),$(window).height(),document.body.scrollTop<80?$(".scroll_box").css("top","75px"):$(".scroll_box").css("top","-8px")}),$(".list li:gt(3)").hide(),$(".moreDate").click(function(){$(".list li:gt(3)").is(":visible")?$(this).find(".icon_more").removeClass("up"):$(this).find(".icon_more").addClass("up"),$(".list li:gt(3)").slideToggle("normal")}),$(".guess_box .guessItem:odd").addClass("oddcss"),$(".guess_box .guessItem:even").addClass("evencss"),$(".headTop").delegate(".loginBtn","click",function(){T()}),$(".headTop").delegate(".sign","click",function(){}),$(".headTop").delegate(".exitLogin","click",function(){G(),R()})}function T(){hhly_login.show(),hhly_login.initConfig({platformId:te.platformId,success:function(e){var t=e.user;t.channel=te._channel_.dj,moudle.cookieServer("api/user/login-platform",t,function(e){R()}),$("#hhly_sso_login_mask").fadeOut(100),$("#hhly_sso_login").slideUp(200),$("body").height($(window).height()).css({overflow:""})}})}function M(e){u("show",e);var t=[".game-guesting",".game-end",".game-rule"];$(e).show(),u(e),t.splice(t.indexOf(e),1),u(t);for(var a=0;a<t.length;a++)$(t[a]).hide()}function L(){$(".guess_box li a").removeClass("active"),$(".popup_bet").animate({top:"106%"},300,function(){$(this).css("top","-57%"),$(".popup_bet").hide(),$(".bet").html(""),$(".mask").hide()}),$("input.betCoin").val("")}function S(e){return e.replace(/^0+|[\D]+/g,"").substr(0,5)}function H(){$(".quizList .game-guesting").delegate(".quizItem .btn_analyse","click",function(e){var t=$(e.currentTarget),a=t.attr("data-teamAName"),o=t.attr("data-teamBName"),i=t.attr("data-code"),n=t.attr("data-aid"),l=t.attr("data-bid");moudle.cookieServer("api/match/team-compare",{teamAId:n,teamBId:l,gameCode:i},function(e){var i=e.data.requiredBackField.split(",");e.data.teamAName=a,e.data.teamBName=o,e.data.requiredBackField=i;for(var n=i.length,l=0;l<n;l++)"teamAHeadPerMatch"==i[l]&&(e.data.tHeadPerMatch=!0),"teamAWinRate"==i[l]&&(e.data.winRate=!0),"teamAFirstBigDragonRate"==i[l]&&(e.data.DragonRate=!0),"teamAFirstTowerRate"==i[l]&&(e.data.TowerRate=!0),"teamAFirstBloodRate"==i[l]&&(e.data.BloodRate=!0);t.prev().html(template("analyseBox",e)),t.parent().hasClass("active")?(t.parent().removeClass("active"),Q(t)):(A(),t.parent().addClass("active"),N(t))})}),$(".match_analyse_box,.peilv,.mask").click(function(){return!1}),$("body").click(function(e){evt=event.srcElement?event.srcElement:event.target,$(evt).hasClass("btn_analyse")||$(evt).parent().hasClass("btn_analyse")||A()})}function N(e){e.siblings(".lit-analysebox").animate({width:"245px"},"fast",function(){e.find(".arrRight").hide(),e.find(".arrLeft").show()})}function Q(e){e.find(".arrRight").show(),e.find(".arrLeft").hide(),e.siblings(".lit-analysebox").animate({width:"0px"})}function A(){$(".btn_analyse").parent().removeClass("active"),$(".btn_analyse").find(".arrRight").show(),$(".btn_analyse").find(".arrLeft").hide(),$(".btn_analyse").siblings(".lit-analysebox").animate({width:"0px"})}function j(){$(".gameClass ").delegate("li","click",function(){u("gameClass click"),$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("data-gameCode");ae=[],te.gameCode=e,I(),O(e)?$(".single_all .single").trigger("click"):(te.singleAll=1,$($(".guessStateTab a")[0]).trigger("click"))})}function O(e){var t=["dota2","lol"];return-1!=t.indexOf(e)?$(".single_all").show():$(".single_all").hide(),-1!=t.indexOf(e)}function B(){$(".single_all div").on("click",function(e){u($(this).index()),$(this).addClass("active").siblings().removeClass("active");var t=$(this).index();te.singleAll=0==t?1:2,$($(".guessStateTab a")[0]).trigger("click")})}function z(){moudle.ajax({url:"//api/match/fun-all/guessing",type:"POST",data:{gameCode:te.gameCode,pageIndex:1,pageSize:3,bGameIds:""}},function(e){q(e)})}function q(e){u(e);var t=e.data.matchList,a=e.data.funCompetitionList;u(te.gameCode);for(var o=[,"hero","team","player","other"],i=0;i<t.length;i++){for(var n=t[i],l={hero:[],team:[],player:[],other:[]},s=0;s<a.length;s++)n.matchDetailId==a[s].matchDetailId&&l[o[a[s].competitionObject]].push(a[s]);for(var p=1;p<o.length;p++)!l.act&&l[o[p]].length>0&&(l.act=o[p]);U(l),l.matchDetailId=n.matchDetailId,l.matchName=n.matchName,n.matchDetailList=l}u(e),$(".quizList .game-guesting").empty(),$(".quizList .game-guesting").append(template("new_play_all",e.data))}function U(e){var t=e.other;if(!t||0==t.length)return e;for(var a=[],o=[],i=0,n=0;n<t.length;n++)-1==o.indexOf(t[n].competitionCode)&&o.push(t[n].competitionCode),i=o.indexOf(t[n].competitionCode),a[i]?a[i].push(t[n]):a[i]=[t[n]];return e.other=a,e}function V(){function e(e,t,a){moudle.cookieServer("api/user/has-login","",function(o){if(200!=o.status)return void T();a(e,t)})}function t(e,t){moudle.cookieServer("api/competition/full-player-list",e,function(e){e.title=t,e.gameCode=te.gameCode;for(var a=0;a<e.data.length;a++)e.data[a];$(".popup-all-match").html(template("new_player_popup_player",e)),$(".popup-all-match,.mask").show()})}function a(e,t){moudle.cookieServer("api/competition/full-team-list",e,function(e){e.title=t,e.gameCode=te.gameCode;for(var a=0;a<e.data.length;a++)e.data[a];$(".popup-all-match").html(template("new_player_popup_team",e)),$(".popup-all-match,.mask").show()})}function o(e,t){moudle.cookieServer("api/competition/full-hero-list",e,function(e){e.title=t,e.gameCode=te.gameCode;for(var a,o=0;o<e.data.length;o++)a=e.data[o],"lol"==e.gameCode?a.icon=g(a.icon):a.icon=f(a.icon);$(".popup-all-match").html(template("new_player_popup_hero",e)),$(".popup-all-match,.mask").show()})}$(".quizList .game-guesting").on("click",".new_play .list li",function(e){$(this).addClass("active").siblings().removeClass("active");var t=$(this).index();$(this).parent().parent().find(".panel > div").each(function(e,a){e==t?$(this).removeClass("hide"):$(this).addClass("hide")})}),$(".quizList .game-guesting").on("click",".new_play .panel .hero_panel .guess_all_list li input",function(t){var a=$(this).parent().attr("data-competitionCode"),i=$(this).parent().attr("data-matchDetailId"),n=$(this).parent().find("span").text();e({guessCode:a,matchDetailId:i,gameCode:te.gameCode},n,o)}),$(".quizList .game-guesting").on("click",".new_play .panel .team_panel .guess_all_list li input",function(t){var o=$(this).parent().attr("data-competitionCode"),i=$(this).parent().attr("data-matchDetailId"),n=$(this).parent().find("span").text();e({guessCode:o,matchDetailId:i,gameCode:te.gameCode},n,a)}),$(".quizList .game-guesting").on("click",".new_play .panel .player_panel .guess_all_list li input",function(a){var o=$(this).parent().attr("data-competitionCode"),i=$(this).parent().attr("data-matchDetailId"),n=$(this).parent().find("span").text();e({guessCode:o,matchDetailId:i,gameCode:te.gameCode},n,t)}),$(".guessPage").on("click",".popup-all-match .select_popup li",function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("data-playerImg"),t=$(this).attr("data-odds"),a=$(this).attr("data-playerName"),o=$(this).attr("data-competitionId");$(".popup-all-match .chooseplayer img").attr("src",e),$(".popup-all-match .chooseplayer").attr("data-competitionid",o),$(".popup-all-match .chooseplayer p").html(a),$(".popup-all-match .compensate span").html(t)}),$(".guessPage").on("keyup",".popup-all-match .bet_limit input",function(){K($(this),$(this).parent().parent().find(".compensate span"),$(this).parent().parent().find(".income span"))}),$(".guessPage").on("click",".popup-all-match .close",function(){$("body").css("overflow-y","scroll"),$(".popup-all-match,.mask").hide(),$(".popup-all-match").empty()}),$(".guessPage").on("click",".popup-all-match .betBtn",function(){var e,t=$(".popup-all-match .bet_limit input").val();e=$(this).parent().parent().parent().find(".left_popup .head .chooseplayer").attr("data-competitionid"),t?t<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:te.gameCode,channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_old .balance span").html(e.data)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币")}),$(".guessPage").on("click",".bet_all .popup_bet .betBtn",function(){var e,t=$(this).parent().parent().find(".betCount .betCoin").val(),e=$(this).attr("data-id");t?t<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:te.gameCode,channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_old .balance span").html(e.data)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币")}),$(".quizList .game-guesting").on("click",".new_play .panel .other_panel .ratio .ratio-list",function(e){var t=$(this).attr("data-competitionId"),a=$(this).attr("data-matchDetailId"),o="xxxxxx";u(t,a,o);var i=$(this).attr("data-competitionId"),n=$(this).parent().parent().find(".top_title").html(),l=$(this).find(".betItem").html(),s=$(this).find(".betbilv").html(),o=$(this).attr("data-matchName");u(o+"  |  全系列赛"+n+" "+l+"@"+s);var p={};p.data={},p.data.gameName=te.gameName,p.data.gameCode=te.gameCode,p.data.matchName=o,p.data.topTitle=n,p.data.betItem=l,p.data.odds=s,p.data.competitionId=i,moudle.cookieServer("api/user/has-login","",function(e){200==e.status?($(".bet_all").html(template("bet_all_other",p)),$(".mask").show(),$(".bet_all .popup_bet").show(),$(".bet_all .popup_bet").animate({top:"27%"},300),moudle.cookieServer("api/user-center/get-account-sum","",function(e){u(e)})):T()})}),$(".guessPage").on("keyup",".bet_all .popup_bet .betCoin",function(){u("keykeykey");var e=$(this).parent().parent().find(".bet_des .odds"),t=$(this).parent().parent().find(".bet_des .pre-win");K($(this),e,t)})}function K(e,t,a){if(e.val()){u(t.text());var o=Number(t.text())*Number(e.val());a.html(o.toFixed(2))}}function F(){moudle.cookieServer("/api/user/logout","",function(){G();var e={status:300};$(".headTop").html(template("headTop",e))})}function G(){var e=["user_lyy_com","regTime_lyy_com"],t=document.cookie.match(/[^ =;]+(?=\=)/g),a="";if(a=document.domain.replace(/(.*)\.(\w+\.com)/,"$2"),t)for(var o=t.length;o--;)-1!=e.indexOf(t[o])?document.cookie=t[o]+"=0;domain="+a+";expires="+new Date(0).toUTCString():document.cookie=t[o]+"=0;expires="+new Date(0).toUTCString()}function E(){moudle.cookieServer("api/common/getPlatformId","",function(e){te.platformId=e.data})}function R(){var e={data:{}};moudle.cookieServer("api/user/info","",function(t){e.data[0]=t,$(".headTop").html(template("headTop",e)),200===t.status&&moudle.cookieServer("api/sign/has-sign-today","",function(t){e.data[1]=t,$(".headTop").html(template("headTop",e))})})}function W(e){return $.each(e.data.matchList,function(t,a){var o=[];$.each(e.data.matchDetailList,function(t,i){var n=i.bMatchId,l=i.matchDetailId,s=[],p={},r=[];n==a.bMatchId&&(i.teamALogo=a.teamALogo,i.teamBLogo=a.teamBLogo,i.teamAName=a.teamAName,i.teamBName=a.teamBName,i.scoreA=a.scoreA,i.scoreB=a.scoreB,o.push(i)),$.each(e.data.funCompetitionList,function(e,t){t.matchDetailId==l&&s.push(t)}),i.fun=s,$.each(i.fun,function(e,t){4==t.competitionObject&&(p[t.competitionCode]||(p[t.competitionCode]=[]),p[t.competitionCode].push(t))});for(var t in p)r.push(p[t]);i.otherGuess=r}),a.matchDetail=o}),u(e),e}function J(){$(".guessPage").on("click",".select-title span",function(){$(this).addClass("active").siblings().removeClass("active"),$(this).hasClass("title-players")?($(this).parent().parent().find(".players").show().find(".intro").html("选手竞猜"),$(this).parent().parent().find(".others").hide()):($(this).parent().parent().find(".others").show().find(".intro").html("其他玩法"),$(this).parent().parent().find(".players").hide())}),$(".guessPage").on("click",".new_play .guess_list li input",function(){var e=$(this).parent().attr("data-competitionCode"),t=$(this).parent().attr("data-matchDetailId"),a=$(this).siblings("span").html();moudle.cookieServer("api/user/has-login","",function(o){200==o.status?($("body").css("overflow-y","hidden"),moudle.ajax({url:"/api/competition/single-player-list",type:"POST",data:{guessCode:e,matchDetailId:t}},function(e){$(".popup-teammember").html(template("popup-teammember",e)),$(".popup-teammember .title").html(a),$(".popup-teammember,.mask").show(),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup-teammember .balance span").html(e.data)})})):T()})}),$(".guessPage").on("click"," .popup-teammember .close",function(){$("body").css("overflow-y","scroll"),$(".popup-teammember,.mask").hide()}),$(".guessPage").on("click",".popup-teammember .select_popup li",function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("data-playerImg"),t=$(this).attr("data-odds"),a=$(this).attr("data-competitionid"),o=$(this).attr("data-playerName");$(".chooseplayer img").attr("src",e),$(".chooseplayer p").html(o),$(".chooseplayer").attr("data-competitionid",a),$(".compensate span").html(t),Z()}),$(".guessPage").on("keyup",".popup-teammember .bet_limit input",function(){Z()}),$(".guessPage").on("click",".popup-teammember .betBtn",function(){var e=$(".popup-teammember .chooseplayer").attr("data-competitionid"),t=($(".popup-teammember .compensate span").html(),$(".bet_limit input").val());$(".compensate span").html()?$(".bet_limit input").val()?$(".bet_limit input").val()<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:"lol",channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup-teammember .balance span").html(e.data)}),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){ee(e)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币"):Util.popup.show("请选择选手")}),$(".guessPage").on("click",".guessStateTab a",function(){}),$(".guessPage").on("click",".icon_intro",function(){$(".gsrule").addClass("active").siblings().removeClass("active"),$(".game-rule").addClass("active"),$("body").scrollTop(0),$(".game-guesting,.game-end").removeClass("active")}),$(".guessPage").on("click",".new_play .guess-list .ratio-list",function(){var e=$(this).attr("data-competitionId"),t=$(this).parent().parent().parent().parent().parent().parent(),a=$(this).parent().parent().find(".top_title").html(),o=$(this).parent().parent().parent().parent().find(".first_play").html(),i=$(this).find(".betItem").html(),n=$(this).find(".betbilv").html(),l=t.find(".matchTitle").html(),s=t.attr("data-gameName")+"  "+l+"  |  "+t.attr("data-teamAName")+"  VS  "+t.attr("data-teamBName")+" "+o;moudle.cookieServer("api/user/has-login","",function(t){200==t.status?($(".popup_old .betMatch").html(s).attr("data-competitionId",e),$(".popup_old .betObject .betItem").html(a+" "+i),$(".popup_old .betbilv").html(n),$(".popup_old").animate({top:"27%"},300),$(".popup_old,.mask").show(),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_old .balance span").html(e.data)})):T()})}),$(".guessPage").on("keyup",".popup_old .betCoin",function(){u("kkkkup");var e=$(this).val()*$(".betbilv").html();$(".popup_old .canwin").html(e.toFixed(2))}),$(".guessPage").on("click",".popup_old .betBtn",function(){u("bet bet");var e=$(".popup_old .betMatch").attr("data-competitionid"),t=$(".popup_old .betCoin").val();t?t<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:"lol",channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_old .balance span").html(e.data)}),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){ee(e)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币")}),$(".guessPage").on("click",".popup_old .closePopup",function(){u("xxxxxxxxxxxx555555555555555"),$(".guess_box li a").removeClass("active"),$(".popup_old").animate({top:"106%"},300,function(){$(this).css("top","-57%"),$(".popup_old").hide()}),$(".mask").hide(),$("input.betCoin").val("")}),u("---0-0-0-0-0-"),$(".guessPage").on("click",".game-guesting .bet input",function(){u("-------------------------");var e=$(this).parent().parent().parent().parent(),t=e.find(".matchTitle").html(),a=$(this).parent().attr("data-competitionId"),o=$(this).parent().siblings(".bet_detail").find("span").html(),i=$(this).siblings(".teamName").html(),n=e.attr("data-gameName")+"  "+t+"  |  "+e.attr("data-teamAName")+"  VS  "+e.attr("data-teamBName")+"  总局";moudle.cookieServer("api/user/has-login","",function(e){200==e.status?($("body").css("overflow-y","hidden"),$(".popup_bet_new .betMatch").html(n).attr("data-competitionId",a),$(".popup_bet_new .betWin span").html(i),$(".popup_bet_new .betObject span").html(o),$(".popup_bet_new,.mask").show(),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_bet_new .balance span").html(e.data)})):T()})}),$(".guessPage").on("click",".popup_bet_new .closePopup",function(){$("body").css("overflow-y","scroll"),$(".popup_bet_new,.mask").hide()}),$(".guessPage").on("click",".popup_bet_new .betBtn",function(){var e=$(".popup_bet_new .betMatch").attr("data-competitionid"),t=$(".popup_bet_new .betCoin").val();t?t<10?Util.popup.show("最少投注10金币"):moudle.cookieServer("/api/bet/save",{competitionId:e,money:t,gameCode:"lol",channel:"P00001"},function(e){200==e.status?(Util.popup.show("投注成功"),moudle.cookieServer("api/user-center/get-account-sum","",function(e){$(".popup_bet_new .balance span").html(e.data)}),moudle.ajax({url:"/api/match/guessing",type:"POST",data:{gameCode:"lol",pageIndex:1,pageSize:3,bGameIds:"",roundType:1}},function(e){ee(e);var t=$(".new_play .bet input").parent().siblings(".bet_detail").find("span").html();$(".popup_bet_new .betObject span").html(t)})):Util.popup.show(e.msg)}):Util.popup.show("请输入投注金币")}),$(".guessPage").on("click",".exitLogin",F),$(".guessPage").on("click",".loginBtn",T),$(".guessPage").on("click",".playerName i",function(){$(".popup_mutiplayers").show(),$(".popup_mutiplayers .header .title").html($(this).parent().next().html())}),$(".guessPage").on("click",".popup_mutiplayers .closePopup",function(){$(".popup_mutiplayers").hide()})}function Y(e){for(var t,a,o,i=e.data.matchDetailList,n=e.data.funCompetitionList,l={},s={},p=0;p<i.length;p++)a=i[p],s[a.matchDetailId]=a;for(var p=0;p<n.length;p++)t=n[p],l[t.competitionCode+t.matchDetailId]=t;for(var p=0;p<i.length;p++)if(a=i[p],o=a.funSingleVO,a.funSingleVO&&(t=l["DMVP"+a.matchDetailId],t&&(t.value=[o.mvp]),t=l["DDMP"+a.matchDetailId],t&&(t.value=o.maxDeathTimesPlayerList),t=l["DKMP"+a.matchDetailId],t&&(t.value=o.maxKillTimesPlayerList),t=l["DSMP"+a.matchDetailId],t&&(t.value=o.maxHurtPlayerList),t=l["DMMP"+a.matchDetailId],t&&(t.value=o.maxMoneyPlayerList),t=l["DMW"+a.matchDetailId],t&&(t.value=o.breakPosition),t=l["DMCK"+a.matchDetailId],
t&&(t.value=o.maxComboKill),t=l["DTIME"+a.matchDetailId],t&&(t.matchTime1=o.matchTime1,t.matchTime2=o.matchTime2),(t=l["ZSW"+a.matchDetailId])&&a.funSingleVO.bonusPool)){t.bonusPool=a.funSingleVO.bonusPool.bonusPoolA,t.teamId=a.teamAId;var r=$.extend({},t);r.bonusPool=a.funSingleVO.bonusPool.bonusPoolB,r.teamId=a.teamBId,n.push(r)}return e}function Z(e){if($(".compensate span").html()&&$(".bet_limit input").val()){var t=$(".compensate span").html()*$(".bet_limit input").val();$(".popup-teammember .income span").html(t.toFixed(2))}}function X(){var e=window.navigator.userAgent.toLowerCase(),t=!1;return(e.indexOf("msie")>-1||e.indexOf(".net")>-1)&&(t=!0),t}function ee(e){o(e),W(e),$(".quizList .game-guesting").append(template("new_play",e)),"ow"==te.gameCode||"cf"==te.gameCode?$(".quizList .game-guesting").append(template("guess",e.data)):$(".quizList .game-guesting").append(template("quizItem",e.data))}var te={gameCode:"dota2",gameName:"dota2",_channel_:{dj:"P00001",live:"P00002",platform:"P00003"},singleAll:1},ae=[],oe=0,ie={},ne={};$(".guessPage").on("click",function(){u("guessPage click")}),$(".guessPage").on("click",function(){u("guessPage click")}),function(){v(),D(),P(),B(),V(),J(),j(),Util.scrollsTop(l),y(),M(".game-guesting"),H(),E(),R()}();var le={QPMH:"maxShowHero",QBMH:"maxForbidHero",QAKH:"avgMaxHeadHero",QAAH:"avgMaxAssistNumHero",QADH:"avgMaxDeathNumHero",QABMH:"avgMaxLastHitHero",QDGMH:"maxGpmHero",QDKMH:"maxHeadHero",QDBMH:"maxLastHitHero",CHAP:"championTeam",QDKT:"maxHeadTeam",QAKT:"avgHeadTeam",QDDLT:"minDeathTeam",QDALT:"maxAssistHitTeam",QTMWT:"maxTimeWinTeam",QTLWT:"minTimeWinTeam",QATMT:"avgMaxTimeTeam",QPHMT:"maxHeroTeam",QAKP:"avgMaxHeadPlayer",QDKP:"maxHeadPlayer",QADLP:"avgMinDeathPlayer",QAAMP:"avgMaxAssistHitPlayer",QDAMP:"maxAssistHitPlayer",QABMP:"avgLastHitPlayer",QDBMP:"maxLastHitPlayer",QDGMP:"maxGpmPlayer",QAGMP:"avgMaxGpmPlayer",QPHMP:"maxShowHeroPlayer",QR:"sumBoNum1,sumBoNum2",QPHN:"showHeroNum1,showHeroNum2",QBHN:"forbidHeroNum1,forbidHeroNum2",QDMT:"maxMatchTime1,maxMatchTime2",QDLT:"minMatchTime1,minMatchTime2",QDKMN:"maxHead1,maxHead2"},se=["QAKP","QDKP","QADLP","QAAMP","QDAMP","QABMP","QDBMP","QDGMP","QAGMP","QPHMP"],pe=["QPMH","QBMH","QAKH","QAAH","QADH","QABMH","QDGMH","QDKMH","QDBMH"],re=["CHAP","QDKT","QAKT","QDDLT","QDALT","QTMWT","QTLWT","QATMT","QPHMT"],me=["QR","QPHN","QBHN","QDMT","QDLT","QDKMN"]});
//# sourceMappingURL=../maps/guessAll.js.map
