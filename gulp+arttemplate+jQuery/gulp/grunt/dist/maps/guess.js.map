{"version":3,"sources":["guess.js"],"names":["getDefualTeamLogo","val","$","trim","getGameCodeName","gameCode","eval","getData","key","window","matchList","setData","data","match_key","loadGuess","gameId","arr","join","moudle","connectServer","pageIndex","cacheObj","pageSize","bGameIds","undefined","html","template","length","console","log","gameName","handleData","initWebSocket","match","i","bMatchId","showGuessTabe","loadGuessNext","par","callBack","fadeIn","cookieServer","showActivity","menuName","append","urlConfig","url","queryGameEndData","param","scrollDown","promise","Deferred","tabState","guessDataObj","page","pageCount","currentPage","date","matchDate","funWithPromise","fadeOut","resolve","endDateObj","gameEndNextBack","gameEndByDate","gameEndByDateBack","document","documentElement","scrollTop","body","empty","indexOf","templateType","addEndDetailList2match","ht","prose","cBack","promised","gameEndDataBack","datetimepicker","language","weekStart","todayBtn","clearBtn","autoclose","format","minView","on","e","this","attr","addClass","siblings","removeClass","myDate","str","ss","arguments","text","detailArr","matchDetailList","j","push","getNumOrNull","parseInt","initEndHlper","helper","gamecode","obj","langauge","lg","getFormatDateByLong","getChinese","parseFloat","toFixed","competitionTypeCode","otherForOrder","JSON","stringify","parse","padleft0","time","toString","replace","Date","String","substring","getFullYear","getMonth","getDate","getHours","getMinutes","teamAHeadPerMatch","teamBHeadPerMatch","getListForGuess","find","loadMatchList","hide","selector","show","splice","initEvent","login","hhly_login","initConfig","platformId","success","user","channel","_channel_","dj","loginStatus","slideUp","height","css","overflow","cookie","delegate","select","id","allMatch","parents","eq","hasClass","click","index","dateStatus","cache","message","status","animate","top","silideDown","code","coin","parent","Util","popup","competitionId","money","msg","odds","moneyFilter","Math","round","Number","scroll","is","slideToggle","signMoudle","isSigned","signCalander","year","month","gou","logOut","clearAllCookie","substr","initAnalyse","target","currentTarget","aName","bName","aId","bId","teamAId","teamBId","requiredBackField","split","teamAName","teamBName","len","tHeadPerMatch","winRate","DragonRate","TowerRate","BloodRate","prev","thisboxHide","analyseboxHide","thisboxshow","evt","event","srcElement","width","initGameTypeClikc","keys","toUTCString","getPlantFormId","data1","data2","comp","comStr","otherCompArr","competitionList","compMap","competitionTypeName","obj1","bo","comObj","pair","otherPair","v","matchDetailId","brotherId","teamId","matchId","version","renderData","compOldList","compNew","compOld","compNewList","compChangeList","m","setTimeout","live","platform","scrollsTop"],"mappings":"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","file":"../js/guess.js","sourcesContent":["\r\n/**\r\n * 获取战队默认LOGO。\r\n *\r\n * @param val\r\n * @return {*}\r\n */\r\nfunction getDefualTeamLogo(val) {\r\n    if ($.trim(val) == '') {\r\n        return 'assets/img/default.png';\r\n    }\r\n    return val;\r\n}\r\n\r\n/**\r\n * 国际化游戏代码名称\r\n * @param gameCode\r\n */\r\nfunction getGameCodeName(gameCode) {\r\n    return eval('data_game_code_name_' + gameCode);\r\n}\r\n\r\nwindow.matchList={};\r\nvar match_key='match_';\r\nfunction getData(key) {\r\n    return window.matchList[key];\r\n}\r\n\r\nfunction setData(key, data) {\r\n    return window.matchList[key]=data;\r\n}\r\n\r\n$(function(){\r\n    var cacheObj = {\r\n        gameCode: 'lol',    //游戏类型\r\n        gameName: 'lol',    //游戏名称\r\n        _channel_: {\r\n            //  电竞渠道\r\n            dj: 'P00001',\r\n            //  一比分渠道\r\n            live: 'P00002',\r\n            //  平台渠道\r\n            platform: 'P00003'\r\n        }\r\n    };\r\n    var arr = [];\r\n    var topics = {}; //订阅的主题\r\n    function loadGuess(){\r\n        //load match\r\n        var gameId = arr.join(\",\");\r\n        moudle.connectServer('/api/match/guessing',{pageIndex: 1,gameCode:cacheObj.gameCode,pageSize: 4,bGameIds:gameId},function(data){\r\n            if(data.data == undefined){\r\n                $('.quizItem').html(template('quizItem',null));\r\n                return;\r\n            }\r\n            var len = data.data.matchList.length;\r\n            var matchList = data.data.matchList;\r\n\r\n            console.log(data.data);\r\n            cacheObj.gameName = matchList[0].gameName;\r\n\r\n            handleData(data);\r\n\r\n            initWebSocket(45395);\r\n\r\n            if(cacheObj.gameCode == \"ow\" || cacheObj.gameCode == \"cf\"){\r\n                $('.quizList .game-guesting').html(template('guess',data.data));\r\n            }else{\r\n                $('.quizList .game-guesting').html(template('quizItem',data.data));\r\n            }\r\n\r\n            var match;\r\n            for(i=0;i<data.data.matchList.length;i++){\r\n                match=data.data.matchList[i];\r\n                setData(match_key+match.bMatchId, match);\r\n            }\r\n\r\n            /*for(var i = 0;i < len;i++){\r\n                initWebSocket(matchList[i].bMatchId);\r\n            }*/\r\n\r\n\r\n            showGuessTabe(\".game-guesting\");\r\n        })\r\n    }\r\n    function loadGuessNext(par,callBack) {\r\n        $(\".loaderMore\").fadeIn();\r\n        moudle.cookieServer('/api/match/guessing',par,callBack);\r\n    }\r\n\r\n    function showActivity(){\r\n        moudle.connectServer('/api/common/activity-open',{menuName: '踩楼有礼,充值有礼,转盘抽奖'},function(data){\r\n            if(data.data[0]){\r\n                $(\".contentLeft\").append('<a href= \"'+ moudle.urlConfig.url+ ' /eventLike/index\" target=\"_blank\"><li><span>踩楼有礼</span><i></i></li></a>')\r\n            }\r\n            if(data.data[1]){\r\n                $(\".contentLeft\").append('<a href= \"'+ moudle.urlConfig.url+ ' /awardCtl/index\" target=\"_blank\"><li><span>充值有礼</span><i></i></li></a>')\r\n            }\r\n            if(data.data[2]){\r\n                $(\".contentLeft\").append('<a href= \"'+ moudle.urlConfig.url+ ' /prizes/index\" target=\"_blank\"><li><span>转盘抽奖</span><i></i></li></a>')\r\n            }\r\n        })\r\n    }\r\n\r\n    var tabState=0;//0竞猜中 1已结束 2玩法介绍；\r\n    var endDateObj={};//已结束状态\r\n    var guessDataObj={};\r\n\r\n    function queryGameEndData(param,callBack){\r\n        // var param = {\r\n        //     gameCode: '',\r\n        //     pageIndex: '',\r\n        //     pageSize: '',\r\n        //     bGameIds: '',\r\n        //     matchDate: '',\r\n        //     dateStatus: '',\r\n        //     roundType: ''\r\n        // }\r\n        moudle.cookieServer('/api/match/guess-end',param,callBack)\r\n    }\r\n    function scrollDown(){\r\n        //向下滚动时  加载下一页\r\n        var promise = $.Deferred();\r\n        if(tabState==0){\r\n            //竞猜中\r\n            //\r\n            if(!guessDataObj||!guessDataObj.page){\r\n                promise.resolve();\r\n            }else if(guessDataObj.page.pageIndex<guessDataObj.page.pageCount){\r\n                var currentPage = guessDataObj.page.pageIndex+1;\r\n                var gameId = arr.join(\",\");\r\n                var par = {gameCode:cacheObj.gameCode,\r\n                    pageIndex:currentPage,\r\n                    pageSize: 4,bGameIds:gameId\r\n                };\r\n                if(guessDataObj.date){\r\n                    par.matchDate = guessDataObj.date;\r\n                }\r\n\r\n                loadGuessNext(par,funWithPromise(promise,function(data){\r\n                    if(data.page){\r\n                        guessDataObj.page=data.page;\r\n                    }else{\r\n                        guessDataObj.page=null;\r\n                    }\r\n                    if(data.data == undefined){\r\n                        return;\r\n                    }\r\n                    /*var matchList = data.data.matchList;\r\n                    var matchDetailList = data.data.matchDetailList;\r\n                    var competitionList = data.data.competitionList;*/\r\n                    cacheObj.gameName = matchList[0].gameName;\r\n                    handleData(data)\r\n                    //competition2matchList(data);\r\n                    if(cacheObj.gameCode == \"ow\" || cacheObj.gameCode == \"cf\"){\r\n                        $('.quizList .game-guesting').append(template('guess',data.data));\r\n                    }else{\r\n                        $('.quizList .game-guesting').append(template('quizItem',data.data));\r\n                    }\r\n                    $(\".loaderMore\").fadeOut();\r\n                }));\r\n            }else{\r\n                promise.resolve();\r\n            }\r\n        }else if(tabState==1){\r\n            //已结束\r\n            log(endDateObj);\r\n            if(!endDateObj||!endDateObj.page){\r\n                promise.resolve();\r\n            }else if(endDateObj.page.pageIndex<endDateObj.page.pageCount){\r\n                $(\".loaderMore\").fadeIn();\r\n                var currentPage = endDateObj.page.pageIndex+1;\r\n                var par = {gameCode:cacheObj.gameCode,\r\n                    pageIndex:currentPage\r\n                };\r\n                if(endDateObj.date){\r\n                    par.matchDate = endDateObj.date;\r\n                }\r\n                queryGameEndData(par,funWithPromise(promise,gameEndNextBack));\r\n            }else{\r\n                promise.resolve();\r\n            }\r\n        }\r\n        return promise.promise();\r\n    }\r\n    function gameEndByDate(){\r\n        //按日期查询 已结束\r\n        var par = {gameCode:cacheObj.gameCode,\r\n        };\r\n        if(endDateObj.date){\r\n            par.matchDate = endDateObj.date;\r\n        }\r\n        queryGameEndData(par,gameEndByDateBack);\r\n    }\r\n    function gameEndByDateBack(data) {\r\n        //处理按日期查询的数据\r\n        document.documentElement.scrollTop=document.body.scrollTop=0;\r\n        if(data.page){\r\n            endDateObj.page=data.page;\r\n        }else{\r\n            endDateObj.page=null;\r\n        }\r\n        if(data.data == undefined){\r\n            $('.game-end .guessEndList').empty();\r\n            return;\r\n        }\r\n        var lolArr=['dota2','lol','hearthstone','csgo','kg','cos'];\r\n        if(lolArr.indexOf(cacheObj.gameCode)!=-1){\r\n            data.data.templateType='lol';\r\n        }else{\r\n            data.data.templateType='ow';\r\n        }\r\n        var match = data.data;\r\n        addEndDetailList2match(match);\r\n        $('.game-end .guessEndList').empty();\r\n        for(var i=0;i<match.matchList.length;i++){\r\n            var ht;\r\n            if(match.templateType=='lol'){\r\n                ht = template('guessEndItem_lol',match.matchList[i]);\r\n            }else{\r\n                ht = template('guessEndItem_ow',match.matchList[i]);\r\n            }\r\n            if(ht){\r\n                $('.game-end .guessEndList').append(ht)\r\n            }\r\n        }\r\n        $(\".loaderMore\").fadeOut()\r\n    }\r\n    function funWithPromise(promise,callBack){\r\n        //加入 promise\r\n        var fun = function (prose,cBack) {\r\n            return function(data){\r\n                var callback = cBack;\r\n                callback(data);\r\n                var promised = prose;\r\n                if(promised){\r\n                    promised.resolve();\r\n                }\r\n            }\r\n        };\r\n        return fun(promise,callBack);\r\n    }\r\n    function gameEndNextBack(data) {\r\n        //向下滚动时  加载下一页 数据处理\r\n        var lolArr=['dota2','lol','hearthstone','csgo','kg','cos'];\r\n        if(lolArr.indexOf(cacheObj.gameCode)!=-1){\r\n            data.data.templateType='lol';\r\n        }else{\r\n            data.data.templateType='ow';\r\n        }\r\n        var match = data.data;\r\n        addEndDetailList2match(match);\r\n        if(data.page){\r\n            endDateObj.page=data.page;\r\n        }\r\n        for(var i=0;i<match.matchList.length;i++){\r\n            var ht;\r\n            if(match.templateType=='lol'){\r\n                ht = template('guessEndItem_lol',match.matchList[i]);\r\n            }else{\r\n                ht = template('guessEndItem_ow',match.matchList[i]);\r\n            }\r\n            if(ht){\r\n                $('.quizItem .guessEndList').append(ht)\r\n            }\r\n        }\r\n        $(\".loaderMore\").fadeOut();\r\n    }\r\n    function gameEndDataBack(data){\r\n        document.documentElement.scrollTop=document.body.scrollTop=0;\r\n        if(data.page){\r\n            endDateObj.page=data.page;\r\n        }else{\r\n            endDateObj.page=null;\r\n        }\r\n        if(data.data == undefined){\r\n            $('.game-end').empty();\r\n            return;\r\n        }\r\n        var lolArr=['dota2','lol','hearthstone','csgo','kg','cos'];\r\n        if(lolArr.indexOf(cacheObj.gameCode)!=-1){\r\n            data.data.templateType='lol';\r\n        }else{\r\n            data.data.templateType='ow';\r\n        }\r\n        var match = data.data;\r\n        addEndDetailList2match(match);\r\n\r\n        $('.game-end').html(template('guessEnd',match));\r\n        $(\".loaderMore\").fadeOut()\r\n        //初始化 日期插件\r\n        //\t日期控件\r\n        $('.searchJC').datetimepicker({\r\n            language: 'zh-cn',\r\n            weekStart: 1,\r\n            todayBtn: 1,\r\n            clearBtn: 1,\r\n            autoclose: 1,\r\n            format: 'yyyy-mm-dd',\r\n            minView: 2\r\n        });\r\n        $('.quizItem .dateSelect .week a').on(\"click\",function (e) {\r\n            endDateObj.date=$(this).attr(\"date-data\");\r\n            $(this).addClass(\"active\").siblings().removeClass(\"active\");\r\n            gameEndByDate();\r\n        });\r\n        $('.quizItem .dateSelect .penData .searchBtn').on(\"click\",function (e) {\r\n\r\n            var myDate = $('.penData  .myDate').val();\r\n            if(myDate) {\r\n                endDateObj.date = myDate;\r\n                gameEndByDate();\r\n            }\r\n        });\r\n    }\r\n    function log(str) {\r\n        //输出日志\r\n        //console.log.apply(null,arguments);\r\n        var ss=\"\";\r\n        for(var i=0;i<arguments.length;i++){\r\n            ss+=arguments[i]+\"\\n\"\r\n        }\r\n        if($(\".log_out p\").length>0){\r\n            var str=$(\".log_out p\").text()+'\\n'+ss;\r\n            $(\".log_out p\").text(str);\r\n        }\r\n    }\r\n    function addEndDetailList2match(data) {\r\n        //数组赛选处理 已结束\r\n        var detailArr = data.matchDetailList;\r\n        var matchList = data.matchList;\r\n        if(!detailArr||detailArr.length==0)return;\r\n        if(!matchList||matchList.length==0)return;\r\n        for(var i=0;i<matchList.length;i++){\r\n            var arr=[];\r\n            var bMatchId=matchList[i].bMatchId;\r\n            for(var j=0;j<detailArr.length;j++){\r\n                if(bMatchId == detailArr[j].bMatchId){\r\n                    arr.push(detailArr[j]);\r\n                }\r\n            }\r\n            matchList[i].matchDetailList=arr.length?arr:null;\r\n        }\r\n\r\n    }\r\n\r\n    /***\r\n     * 为null或空时，返回-。\r\n     * 0是有效数据，不返回-，\r\n     * @param val\r\n     * @return {*}\r\n     */\r\n    function getNumOrNull(val) {\r\n        if (val == 0) {\r\n            return val;\r\n        }\r\n        /// 因为!0=true，因为需先判断val是否为0\r\n        if (!val || parseInt(val) <= -1) {\r\n            return '-';\r\n        }\r\n        return val;\r\n    }\r\n    function initEndHlper(){\r\n        //已结束\r\n        template.helper('endRootUrl',function(gamecode){\r\n            var str = moudle.urlConfig.url+gamecode;\r\n            return str;\r\n        });\r\n        //语言\r\n        template.helper('lg',function(obj,key){\r\n            return langauge.lg(key);\r\n        });\r\n        template.helper('formatDate', getFormatDateByLong);//来源于 dateFormart.js\r\n        // template.helper('langData', getValueByLanguage);没找到该方法\r\n        template.helper('getChinese', getChinese);\r\n        template.helper('getNumOrNull', getNumOrNull);\r\n        template.helper('getGameCodeName', getGameCodeName);\r\n        template.helper('getDefualTeamLogo', getDefualTeamLogo);\r\n\r\n        template.helper('judgeNull',function(obj){\r\n            if(obj == null){\r\n                return '../images/default.png'\r\n            }\r\n            return obj\r\n        });\r\n\r\n        template.helper('supple',function(obj){\r\n            return parseFloat(obj).toFixed(2)\r\n        })\r\n\r\n        template.helper('judgeClass',function(obj){\r\n            if(obj.competitionTypeCode == 'HW'){\r\n                if(obj.otherForOrder == '1'){\r\n                    return '大'\r\n                }else if(obj.otherForOrder == '2'){\r\n                    return '小'\r\n                }\r\n            }\r\n            if(obj.competitionTypeCode == 'SD'){\r\n                if(obj.otherForOrder == '1'){\r\n                    return '单'\r\n                }else if(obj.otherForOrder == '2'){\r\n                    return '双'\r\n                }\r\n            }\r\n            return '';\r\n        })\r\n\r\n        template.helper('jsonString',function(obj){\r\n            return JSON.stringify(obj)\r\n        });\r\n\r\n        template.helper('string',function(obj){\r\n            return JSON.parse(obj)['zh_CN']\r\n        })\r\n\r\n        template.helper('judgeMatch',function(obj){\r\n            if(obj == 0){\r\n                return '总局'\r\n            }else if(obj == -1){\r\n                return '全系列赛'\r\n            }else if(obj == 'other'){\r\n                return '其他玩法'\r\n            } else{\r\n                return '第'+obj+'局'\r\n            }\r\n        })\r\n\r\n        template.helper('dateFormat',function(obj){\r\n            function padleft0(time) {\r\n                return time.toString().replace(/^[0-9]{1}$/, \"0\" + time);\r\n            };\r\n            if(obj){\r\n                var date = new Date(parseInt(String(obj).substring(0,10)) * 1000);\r\n                var year = date.getFullYear(),\r\n                    month = padleft0(date.getMonth()+1),\r\n                    day = padleft0(date.getDate()),\r\n                    hours = padleft0(date.getHours()),\r\n                    minutes = padleft0(date.getMinutes());\r\n                return year+ '-' +month+ '-' +day+ ' ' + hours+ ':' +minutes;\r\n            }\r\n            return '-';\r\n        });\r\n\r\n        template.helper('teamAPercent',function(data){\r\n            return (data.teamAHeadPerMatch/(data.teamAHeadPerMatch+data.teamBHeadPerMatch))*100\r\n        })\r\n\r\n        template.helper('teamBPercent',function(data){\r\n            return (data.teamBHeadPerMatch/(data.teamAHeadPerMatch+data.teamBHeadPerMatch))*100\r\n        })\r\n    }\r\n\r\n    function getListForGuess() {\r\n        moudle.cookieServer('/api/portal/list-for-guess','',function(data){\r\n            $('.gameClass').html(template('gameClass',data))\r\n            $(\".gameClass\").find(\"li:eq(0)\").addClass(\"active\");\r\n        })\r\n    }\r\n\r\n    function loadMatchList(){\r\n        moudle.cookieServer('/api/match-type/list-for-guess',{gameCode:cacheObj.gameCode},function(data){\r\n            $('.matchClass').html(template('matchClass',data))\r\n            $('.list li:gt(3)').hide();\r\n        })\r\n    }\r\n\r\n    function showGuessTabe(selector) {\r\n        var arr=['.game-guesting','.game-end','.game-rule'];\r\n        $(selector).show();\r\n        log(selector);\r\n        arr.splice(arr.indexOf(selector),1);\r\n        log(arr);\r\n        for(var i=0;i<arr.length;i++){\r\n            $(arr[i]).hide();\r\n        }\r\n    }\r\n\r\n    function initEvent() {\r\n        //赛事切换\r\n        $(\".matchClass\").delegate(\"li a\",\"click\",function(){\r\n            var select = $(this).find('.icon_radio'),\r\n                id = $(this).attr('data-id');\r\n            arr.push(id);\r\n            if(id == ''){\r\n                arr = [];\r\n            }\r\n            var allMatch = $(this).parents(\"li\").siblings().eq(0);\r\n            select.addClass('selected');\r\n            $(allMatch[0]).find('.allMatch').removeClass('selected');\r\n            if(select.hasClass('allMatch')){\r\n                select.addClass('selected');\r\n                $(this).parents(\"li\").siblings().find('.icon_radio').removeClass('selected')\r\n            }\r\n            loadGuess();\r\n        })\r\n\r\n        $(\".guessStateTab a\").click(function(){\r\n            var val = $(this).find('span').html();\r\n            $(this).addClass(\"active\").siblings().removeClass(\"active\");\r\n            tabState =$(this).index();\r\n            if(val == '玩法介绍'){\r\n                $('.game-rule').html(template('guessRule',null));\r\n                showGuessTabe('.game-rule');\r\n            }else if(val == '竞猜中'){\r\n                loadGuess();\r\n                showGuessTabe('.game-guesting');\r\n            }else{\r\n                //已结束\r\n                endDateObj.date=null;\r\n                showGuessTabe('.game-end');\r\n                queryGameEndData({gameCode:cacheObj.gameCode,dateStatus:1,\r\n                },gameEndDataBack);\r\n            }\r\n        })\r\n\r\n        //open bet\r\n        $(\".quizList .game-guesting\").delegate(\".quizItem li a\",\"click\",function(){\r\n            var cache = JSON.parse($(this).attr('data-cache'));\r\n            cache.gameName = cacheObj.gameName;\r\n            cache.gameCode = cacheObj.gameCode;\r\n            var data = {data: cache};\r\n\r\n            moudle.cookieServer('api/user/has-login','',function(message){\r\n                if(message.status == 300){\r\n                    login();\r\n                }else{\r\n                    loginStatus();\r\n                    $('.bet').html(template('bet',data));\r\n                    $(\".mask\").show();\r\n                    $(\".popup_bet\").show();\r\n                    $(\".popup_bet\").animate({top: \"27%\"}, 300);\r\n                }\r\n            })\r\n        })\r\n\r\n        //close bet\r\n        $(\".bet\").delegate(\".closePopup\",\"click\",function(){\r\n            silideDown();\r\n        })\r\n\r\n        $(\".bet\").delegate(\".betCoin\",\"click\",function(){\r\n            $(this).attr(\"placeholder\", \"\");\r\n        })\r\n\r\n        //at once bet\r\n        $(\".bet\").delegate(\".betBtn\",\"click\",function(){\r\n            var id = $(this).attr(\"data-id\"),\r\n                code = $(this).attr(\"data-code\"),\r\n                coin = $(this).parent().siblings(\".betCount\").find(\".betCoin\").val();\r\n            if (!$('.betCoin').val()) {\r\n                Util.popup.show(\"请输入金额\");\r\n                return;\r\n            } else if ($('.betCoin').val() < 10){\r\n                Util.popup.show(\"最小下注金额10金币\");\r\n                return;\r\n            }\r\n\r\n            moudle.cookieServer('api/bet/save',{competitionId: id,money: coin,gameCode: code},function(data){\r\n                console.log(data);\r\n                if(data.status == 200){\r\n                    Util.popup.show(\"投注成功\");\r\n                    loginStatus();\r\n                }\r\n                Util.popup.show(data.msg);\r\n            })\r\n            silideDown();\r\n        });\r\n\r\n        //金币输入框事件处理\r\n        $(\".bet\").delegate(\"input.betCoin\",\"keyup\",function(){\r\n            var odds = $(\".odds\").html();\r\n            var val = $(this).val();\r\n            $(this).val(moneyFilter(val));\r\n            $('.pre-win').text(Math.round(Number(val) * Number(odds) * 100) / 100.0)\r\n        })\r\n\r\n        //滚动固定弹窗\r\n        $(window).scroll(function(){\r\n            if ($(document).scrollTop() >= $(document).height() - $(window).height()){\r\n                //alert(\"滚动条已经到达底部为\" + $(document).scrollTop());\r\n            }\r\n            var scrollTop = document.body.scrollTop;\r\n            if(scrollTop < 80){\r\n                $(\".scroll_box\").css(\"top\",\"75px\");\r\n            }else{\r\n                $(\".scroll_box\").css(\"top\",\"-8px\");\r\n            }\r\n        })\r\n\r\n        $('.list li:gt(3)').hide();\r\n        $('.moreDate').click(function (){\r\n            if ($('.list li:gt(3)').is(\":visible\")) {\r\n                $(this).find(\".icon_more\").removeClass(\"up\");\r\n            } else {\r\n                $(this).find(\".icon_more\").addClass(\"up\");\r\n            }\r\n            $('.list li:gt(3)').slideToggle('normal');\r\n        });\r\n        $(\".guess_box .guessItem:odd\").addClass(\"oddcss\");\r\n        $(\".guess_box .guessItem:even\").addClass(\"evencss\");\r\n\r\n        //login\r\n        $(\".headTop\").delegate(\".loginBtn\",\"click\",function(){\r\n            console.log(cacheObj)\r\n            login();\r\n        });\r\n\r\n        function login(){\r\n            hhly_login.show();\r\n            hhly_login.initConfig({\r\n                \"platformId\": cacheObj.platformId ,\r\n                \"success\": function (data){\r\n                    console.log(data)\r\n                    var user = data.user;\r\n                    console.log(user);\r\n                    user.channel = cacheObj._channel_.dj;\r\n\r\n                    moudle.cookieServer('/api/user/login-platform',user,function(data){\r\n                        console.log(data);\r\n                        loginStatus();\r\n                    })\r\n                    $('#hhly_sso_login_mask').fadeOut(100);\r\n                    $('#hhly_sso_login').slideUp(200);\r\n                    $(\"body\").height($(window).height()).css({\"overflow\": \"\"});\r\n                    //judge login\r\n                    console.log(document.cookie)\r\n                }\r\n            });\r\n        }\r\n\r\n        /*$(\".sign_popup\").delegate(\".sign_btn\",\"click\",function(){\r\n            $(this).addClass('yet');\r\n            moudle.cookieServer('api/sign/signin',{'language': 'zh_CN', osType: 'pc'},function(resp){\r\n                if(resp.data > 0){\r\n                    Util.popup.textUp('已签到成功，获得+' + resp.data + '金币');\r\n                }\r\n            })\r\n        })*/\r\n\r\n        //签到\r\n        $(\".headTop\").delegate(\".sign\",\"click\",function(){\r\n            if(signMoudle.isSigned()){\r\n                return false;\r\n            }\r\n            //signMoudle.isSigned();\r\n\r\n            moudle.cookieServer('api/sign/list','',function(data){\r\n                console.log(data)\r\n                //signMoudle.renderSignPanel(data)\r\n                $(\".sign_popup\").html(template(\"sign\",data));\r\n\r\n                $('.calendar').signCalander({\r\n                    year: data.data.year,\r\n                    month: data.data.month - 1,\r\n                    gou: moudle.urlConfig.url + '/images/sign_ca/ca_gou.png'\r\n                });\r\n            })\r\n        })\r\n\r\n        // 关闭签到\r\n        $(\".sign_popup\").delegate(\".act_close\",\"click\",function(){\r\n            $(\".sign_popup\").html(\"\");\r\n        })\r\n\r\n        //exit login\r\n        $(\".headTop\").delegate(\".exitLogin\",\"click\",logOut)\r\n    }\r\n    function logOut(){\r\n        ///api/user/logout\r\n        moudle.cookieServer('/api/user/logout','',function(){\r\n            clearAllCookie();\r\n            loginStatus();\r\n        })\r\n    }\r\n    function showGuessTabe(selector){\r\n        var arr=['.game-guesting','.game-end','.game-rule'];\r\n        $(selector).show();\r\n        log(selector);\r\n        arr.splice(arr.indexOf(selector),1);\r\n        log(arr);\r\n        for(var i=0;i<arr.length;i++){\r\n            $(arr[i]).hide();\r\n        }\r\n\r\n    }\r\n    function silideDown(){\r\n        $(\".guess_box li a\").removeClass(\"active\");\r\n        $(\".popup_bet\").animate({top: \"106%\"}, 300, function (){\r\n            $(this).css(\"top\", \"-57%\");\r\n            $(\".popup_bet\").hide();\r\n            $(\".bet\").html(\"\");\r\n            $(\".mask\").hide();\r\n        });\r\n        $(\"input.betCoin\").val(\"\");\r\n    }\r\n\r\n    function moneyFilter(str){\r\n        return str.replace(/^0+|[\\D]+/g, \"\").substr(0, 5);\r\n    }\r\n\r\n    function initAnalyse(){\r\n        //战队比赛数据分析\r\n        $(\".quizList\").delegate(\".btn_analyse\",\"click\",function(e){\r\n            var target = $(e.currentTarget),\r\n                aName = target.attr(\"data-teamAName\"),\r\n                bName = target.attr(\"data-teamBName\"),\r\n                gameCode = target.attr(\"data-code\"),\r\n                aId = target.attr(\"data-aid\"),\r\n                bId = target.attr(\"data-bid\");\r\n            moudle.cookieServer('/api/match/team-compare',{teamAId: aId,teamBId: bId,gameCode: gameCode},function(data){\r\n                var arr = data.data.requiredBackField.split(\",\");\r\n                data.data.teamAName = aName;\r\n                data.data.teamBName = bName;\r\n                data.data.requiredBackField = arr;\r\n                var len = arr.length;\r\n                for(var i = 0; i < len; i++){\r\n                    if(arr[i] == \"teamAHeadPerMatch\"){\r\n                        data.data.tHeadPerMatch = true;\r\n                    }\r\n                    if(arr[i] == \"teamAWinRate\"){\r\n                        data.data.winRate = true;\r\n                    }\r\n                    if(arr[i] == \"teamAFirstBigDragonRate\"){\r\n                        data.data.DragonRate = true;\r\n                    }\r\n                    if(arr[i] == \"teamAFirstTowerRate\"){\r\n                        data.data.TowerRate = true;\r\n                    }\r\n                    if(arr[i] == \"teamAFirstBloodRate\"){\r\n                        data.data.BloodRate = true;\r\n                    }\r\n                }\r\n                target.prev().html(template(\"analyseBox\",data));\r\n                if(!target.parent().hasClass('active')){\r\n                    analyseboxHide();\r\n                    target.parent().addClass('active');\r\n                    thisboxshow(target);\r\n                }else{\r\n                    target.parent().removeClass('active');\r\n                    thisboxHide(target);\r\n                }\r\n            })\r\n        });\r\n        $('.match_analyse_box,.popup_bet,.peilv,.mask').click(function(){\r\n            return false;\r\n        });\r\n        $('body').click(function (e) {\r\n            evt = event.srcElement ? event.srcElement : event.target;\r\n            if($(evt).hasClass('btn_analyse')||$(evt).parent().hasClass('btn_analyse')){\r\n                return;\r\n            }\r\n            analyseboxHide();\r\n        });\r\n\r\n\r\n    }\r\n    function thisboxshow(target){\r\n        target.siblings('.lit-analysebox').animate({width: \"245px\"},'fast',function (){\r\n            target.find('.arrRight').hide();\r\n            target.find('.arrLeft').show();\r\n        });\r\n    }\r\n    function thisboxHide(target) {\r\n        target.find('.arrRight').show();//右箭头显示\r\n        target.find('.arrLeft').hide();//左箭头隐藏\r\n        target.siblings('.lit-analysebox').animate({width: \"0px\"});\r\n    }\r\n    function analyseboxHide(){\r\n        $('.btn_analyse').parent().removeClass('active');\r\n        $('.btn_analyse').find('.arrRight').show();//右箭头显示\r\n        $('.btn_analyse').find('.arrLeft').hide();//左箭头隐藏\r\n        $('.btn_analyse').siblings('.lit-analysebox').animate({width: \"0px\"});\r\n    }\r\n\r\n    function initGameTypeClikc() {\r\n        $(\".gameClass \").delegate(\"li\",\"click\",function(){\r\n            $(this).addClass(\"active\").siblings().removeClass(\"active\");\r\n            var gameCode = $(this).attr(\"data-gameCode\");\r\n            arr = [];\r\n            cacheObj.gameCode = gameCode;\r\n            loadGuess();\r\n            loadMatchList();\r\n        })\r\n\r\n    }\r\n\r\n    //delete all cookie\r\n    function clearAllCookie(){\r\n        var keys = document.cookie.match(/[^ =;]+(?=\\=)/g);\r\n        if(keys) {\r\n            for(var i = keys.length; i--;)\r\n                document.cookie = keys[i] + '=0;expires=' + new Date(0).toUTCString()\r\n        }\r\n    }\r\n\r\n    function getPlantFormId() {\r\n        //get plartform id\r\n        moudle.cookieServer('/api/common/getPlatformId','',function(data){\r\n            cacheObj.platformId = data.data;\r\n        })\r\n    }\r\n\r\n    //get user information\r\n    function loginStatus(){\r\n        var message = {data: {}};\r\n        moudle.cookieServer('api/user/info','',function(data1){\r\n            message.data[0] = data1;\r\n            $('.headTop').html(template('headTop',message));\r\n            if(data1.status !== 200){\r\n                return;\r\n            }else{\r\n                moudle.cookieServer('api/sign/has-sign-today','',function(data2){\r\n                    message.data[1] = data2;\r\n                    $('.headTop').html(template('headTop',message));\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    function handleData(data){\r\n        var matchList = data.data.matchList;\r\n        var matchDetailList = data.data.matchDetailList;\r\n        var competitionList = data.data.competitionList;\r\n\r\n        var compMap = {};\r\n        var comp;\r\n        var comStr;\r\n        var otherCompArr;\r\n        var match;\r\n\r\n        for(var e = 0;e< competitionList.length; e++){\r\n            comp = competitionList[e];\r\n            comp.competitionTypeName = JSON.parse(comp.competitionTypeName)['zh_CN'];\r\n            compMap[comp.competitionId]=comp;\r\n        }\r\n\r\n        for(var i = 0;i< matchList.length;i++){\r\n            match = matchList[i];\r\n            match.obj1 = {};\r\n\r\n            comStr = ''; //\r\n            otherCompArr = [];\r\n\r\n            for(var j = 0;j< matchDetailList.length;j++){\r\n                if(matchList[i].bMatchId !== matchDetailList[j].bMatchId){\r\n                    continue;\r\n                }\r\n\r\n                //matchList[i].obj[matchDetailList[j].bo] = [];\r\n                matchList[i].obj1[matchDetailList[j].bo] = [];\r\n\r\n                var comObj;\r\n                var pair;\r\n                var otherPair;\r\n\r\n                for(var v = 0;v< competitionList.length;v++){\r\n\r\n                    comObj = competitionList[v];\r\n                    pair = null;\r\n\r\n                    if(matchDetailList[j].matchDetailId == competitionList[v].matchDetailId){\r\n                        //matchList[i].obj[matchDetailList[j].bo].push(comObj);\r\n\r\n                        //\r\n                        if(!compMap[comObj.brotherId] || comStr.indexOf(comObj.competitionId+'') >= 0\r\n                            || comStr.indexOf(comObj.brotherId+'') >= 0){\r\n                            continue;\r\n                        }\r\n\r\n                        // is other guess\r\n                        if(comObj.teamId <= '0'){\r\n                            if(comObj.competitionId < comObj.brotherId){\r\n                                otherPair=[comObj, compMap[comObj.brotherId]];\r\n                            }else{\r\n                                otherPair=[compMap[comObj.brotherId], comObj];\r\n                            }\r\n                            otherCompArr.push(otherPair);\r\n                            comStr += comObj.competitionId+',';\r\n                            continue;\r\n                        }\r\n\r\n                        if(comObj.competitionId < comObj.brotherId){\r\n                            pair=[comObj, compMap[comObj.brotherId]];\r\n                        }else{\r\n                            pair=[compMap[comObj.brotherId], comObj];\r\n                        }\r\n\r\n                        comStr += comObj.competitionId+',';\r\n                        matchList[i].obj1[matchDetailList[j].bo].push(pair);\r\n\r\n                    }\r\n                }\r\n\r\n                if(matchList[i].obj1[matchDetailList[j].bo].length == 0){\r\n                    delete matchList[i].obj1[matchDetailList[j].bo];\r\n                }\r\n            }\r\n\r\n            if(otherCompArr && otherCompArr.length > 0){\r\n                match.obj1['other'] = otherCompArr;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    function initWebSocket(matchId){\r\n        moudle.connectServer('/api/competition/poll',{matchId: matchId, version: 0},function(data){\r\n            console.log(data);\r\n            if(data.data){\r\n                // old list compare new list\r\n                var match = getData(match_key + matchId);\r\n                var compNewList={},\r\n                    compOldList,\r\n                    matchDetailList,\r\n                    compNew,\r\n                    compOld,\r\n                    compChangeList=[];\r\n\r\n                for (var i=0; i<data.data.competitionList.length;i++){\r\n                    compNew=data.data.competitionList[i];\r\n                    /*if(compNew.competitionId==12897){\r\n                     compNew.odds=compNew.odds+0.2;\r\n                     }*/\r\n                    compNewList[compNew.competitionId]=compNew;\r\n                }\r\n                console.log(compNew)\r\n                console.log(match);\r\n                // match detail list\r\n                for (var m in match.obj1){\r\n                    matchDetailList=match.obj1[m];\r\n                    for (var bo in matchDetailList){\r\n                        compOldList=matchDetailList[bo];\r\n                        console.log(compOldList.length)\r\n                        console.log(compOldList)\r\n                        for (var j=0; j<compOldList.length;j++) {\r\n                            // compare odds\r\n                            compOld= compOldList[j];\r\n                            compNew= compNewList[compOld.competitionId];\r\n\r\n                            if(compOld.odds > compNew.odds){\r\n                                // TODO\r\n                                compOldList[j]=compNew;\r\n                                compChangeList.push(compNew);\r\n                                $(\"#\"+compNew.competitionId).parents('li').append('<i class=\"arrow tips-down\" style=\"display: block;\">↓</i>');\r\n                                console.log('>>>>>>>>>>>>>>>>>>>>>>'+compNew.competitionId)\r\n                            }else if(compOld.odds < compNew.odds){\r\n                                // TODO\r\n                                compOldList[j]=compNew;\r\n                                compChangeList.push(compNew);\r\n                                $(\"#\"+compNew.competitionId).parents('li').append('<i class=\"arrow tips-up\" style=\"display: block;\">↑</i>');\r\n                                console.log($(\"#\"+compNew.competitionId).html())\r\n                                console.log('<<<<<<<<<<<<<<<<<<<<<<<<<'+ compNew.competitionId)\r\n                            }else{\r\n                                console.log('xxxxxxxxx==================');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function renderData(){\r\n                    var data={data:{matchList: [match]}};\r\n                    console.log(data)\r\n                    // render template\r\n                    if(match.gameCode == \"ow\" || match.gameCode == \"cf\"){\r\n                        $('.quizItem[data-id=\"'+match.bMatchId+'\"]').html(template('guess',data.data));\r\n                    }else{\r\n                        $('.quizItem[data-id=\"'+match.bMatchId+'\"]').html(template('quizItem',data.data));\r\n                    }\r\n                }\r\n                setTimeout(renderData,5000)\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n\r\n    function contrastData(data){\r\n        if(data.data){\r\n            // old list compare new list\r\n            var match = getData(match_key + matchId);\r\n            var compNewList={},\r\n                compOldList,\r\n                matchDetailList,\r\n                compNew,\r\n                compOld,\r\n                compChangeList=[];\r\n\r\n            for (var i=0; i<data.data.competitionList.length;i++){\r\n                compNew=data.data.competitionList[i];\r\n                /*if(compNew.competitionId==12897){\r\n                    compNew.odds=compNew.odds+0.2;\r\n                }*/\r\n                compNewList[compNew.competitionId]=compNew;\r\n            }\r\n\r\n            console.log(\"match\");\r\n            console.log(match);\r\n\r\n            // match detail list\r\n            for (var m in match.obj1){\r\n                matchDetailList=match.obj1[m];\r\n                for (var bo in matchDetailList){\r\n                    compOldList=matchDetailList[bo];\r\n                    for (var j=0; j<compOldList.length;j++) {\r\n                        // compare odds\r\n                        compOld= compOldList[j];\r\n                        compNew= compNewList[compOld.competitionId];\r\n\r\n                        if(compOld.odds > compNew.odds){\r\n                            // TODO\r\n                            compOldList[j]=compNew;\r\n                            compChangeList.push(compNew);\r\n                            $(\"#\"+compNew.competitionId).parents('li').append('<i class=\"arrow tips-down\" style=\"display: block;\">↓</i>');\r\n                            console.log('>>>>>>>>>>>>>>>>>>>>>>'+compNew.competitionId)\r\n                        }else if(compOld.odds < compNew.odds){\r\n                            // TODO\r\n                            compOldList[j]=compNew;\r\n                            compChangeList.push(compNew);\r\n                            $(\"#\"+compNew.competitionId).parents('li').append('<i class=\"arrow tips-up\" style=\"display: block;\">↑</i>');\r\n                            console.log($(\"#\"+compNew.competitionId).html())\r\n                            console.log('<<<<<<<<<<<<<<<<<<<<<<<<<'+ compNew.competitionId)\r\n                        }else{\r\n                            console.log('xxxxxxxxx==================');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            function renderData(){\r\n                var data={data:{matchList: [match]}};\r\n                console.log(data)\r\n                // render template\r\n                if(match.gameCode == \"ow\" || match.gameCode == \"cf\"){\r\n                    $('.quizItem[data-id=\"'+match.bMatchId+'\"]').html(template('guess',data.data));\r\n                }else{\r\n                    $('.quizItem[data-id=\"'+match.bMatchId+'\"]').html(template('quizItem',data.data));\r\n                }\r\n            }\r\n            setTimeout(renderData,5000)\r\n        }\r\n    }\r\n\r\n    //判断是否是IE\r\n    function isIE() {\r\n        var ua = window.navigator.userAgent.toLowerCase();\r\n        var isIe = false;\r\n        if (ua.indexOf(\"msie\") > -1 || ua.indexOf(\".net\") > -1) {\r\n            isIe = true;\r\n        }\r\n        return isIe;\r\n    }\r\n\r\n    //\twebSocket\r\n    var pollingVersions = {}; //IE轮询信息版本号集合\r\n    /*function initWebSocket(matchId) {\r\n        if ('WebSocket' in window && !isIE()) {\r\n            var topic = topics['\"' + matchId + '\"'];\r\n            //该主题未订阅，则订阅该主题\r\n            if (!topic){\r\n                //初始化 websocket\r\n                var websocket = Stomp.client(moudle.urlConfig.websocketUrl);\r\n                websocket.connect(\"\", \"\", function (){\r\n                        topic = websocket.subscribe(\"/topic/GUEST.topic.game.yxjc.match.\" + matchId, function (data) {\r\n                            contrastData(data);\r\n                        });\r\n                    }\r\n                );\r\n                topics['\"' + matchId + '\"'] = topic;\r\n            }\r\n        } else {\r\n            pollingVersions[matchId] = -1;\r\n            setInterval(function (){\r\n                moudle.connectServer(\"/api/competition/poll\",{\"matchId\": matchId, version: pollingVersions[matchId]},function(data){\r\n                    if (data) { //如果服务器返回的有数据\r\n                        pollingVersions[matchId] = data.version; //更新版本号\r\n                        contrastData(data);\r\n                    }\r\n                })\r\n            }, 5000);\r\n        }\r\n    }*/\r\n\r\n    gameInit();\r\n    function gameInit(){\r\n        //入口方法\r\n        initEndHlper();\r\n        loadGuess();\r\n        Util.scrollsTop(scrollDown);\r\n        getListForGuess();\r\n        loadMatchList();\r\n        initEvent();\r\n        initAnalyse();\r\n        initGameTypeClikc();\r\n        getPlantFormId();\r\n        loginStatus();\r\n        showActivity();\r\n    }\r\n})\r\n"]}