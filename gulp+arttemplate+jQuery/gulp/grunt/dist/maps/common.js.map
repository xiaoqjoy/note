{"version":3,"sources":["common.js"],"names":["moudle","formatNumber","n","toString","formatTime","time","year","getFullYear","month","getMonth","date","getDate","day","getDay","hour","getHours","minute","getMinutes","weekarray","getSeconds","map","join","clock","weekday","ajax","params","callback","url","indexOf","substr","$","type","urlConfig","dataType","data","success","error","cookieServer","xhrFields","withCredentials","cache","crossDomain","connectServer","newhash","window","location","hash","substring","getParam","arr","split","length","i","getHashByKey","key","getHashParam","obj","reg","replace","match","temparr","saveParam2Cookei","str","document","cookie","getHashFromCookei","getCookie","name","RegExp","px2rem","px","parseFloat","css","setLocalStorage","value","localStorage","getLocalStorage","removeLocalStorage","removeItem","pngUrl","websocketUrl","domobj","dom13322","test","href","html","template","ls","getLs","setLs","rmItem"],"mappings":"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","file":"../js/common.js","sourcesContent":["var moudle = (function(){\r\n    var urlConfig = {\r\n        url: 'http://game1.1332255.com/',\r\n        websocketUrl: \"ws://ws.1332255.com\"\r\n    }\r\n    var pngUrl;\r\n    var domobj={\r\n        dom13322:'13322'\r\n    }\r\n    if(/\\.13322\\.com/.test(location.href)){\r\n        domobj.dom13322='13322';\r\n        pngUrl = 'dj.13322.com'\r\n    }else{\r\n        domobj.dom13322='1332255';\r\n        pngUrl = 'http://game1.1332255.com/'\r\n    }\r\n\r\n    $('.headNav').html(template('headNav'));\r\n    $('.footBar').html(template('footBar'));\r\n\r\n    if(/localhost/.test(location.href)){\r\n        urlConfig.url='http://game1.1332255.com/';\r\n    }else{\r\n        urlConfig.url='http://game1.1332255.com/';\r\n    }\r\n    function formatNumber(n) {\r\n        n = n.toString();\r\n        return n[1] ? n : '0' + n\r\n    }\r\n    function formatTime(time) {\r\n        var year = time.getFullYear();\r\n        var month = time.getMonth() + 1;\r\n        var date = time.getDate();\r\n        var day = time.getDay();\r\n        var hour = time.getHours();\r\n        var minute = time.getMinutes();\r\n        var second = time.getSeconds();\r\n        var weekarray =[\"星期日\",\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\"];\r\n        return{\r\n            date:[year,month, date].map( formatNumber ).join('-'),\r\n            clock:[hour, minute].map( formatNumber ).join(':'),\r\n            weekday:weekarray[day]\r\n        }\r\n    }\r\n    function ajax(params, callback) {\r\n        if (params.url.indexOf('/') == 0) {\r\n            params.url = params.url.substr(1);\r\n        }\r\n        $.ajax({\r\n            type: params.type,\r\n            url: urlConfig.url + params.url,\r\n            dataType: \"json\",\r\n            data: params.data,\r\n            success: function (data) {\r\n                callback(data);\r\n            },\r\n            error: function (error) {\r\n            }\r\n        });\r\n    }\r\n\r\n    function cookieServer(url,data,callback){\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: moudle.urlConfig.url + url,\r\n            dataType: \"json\",\r\n            data: data,\r\n            xhrFields: {\r\n                withCredentials: true\r\n            },\r\n            cache:false,\r\n            crossDomain: true,\r\n            success: function (data){\r\n                callback(data);\r\n            },\r\n            error: function (error){\r\n            }\r\n        });\r\n    }\r\n\r\n    function connectServer(url, data, callback) {\r\n        if (url.indexOf('/') == 0) {\r\n            url = url.substr(1);\r\n        }\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: urlConfig.url + url,\r\n            dataType: \"json\",\r\n            data: data,\r\n            cache:false,\r\n            success: function (data) {\r\n                callback(data);\r\n            },\r\n            error: function (error) {\r\n            }\r\n        });\r\n    }\r\n\r\n    function newhash(){\r\n        window.location.hash.substring(1)\r\n    };\r\n    function getParam(url){\r\n        var arr = [];\r\n        if(url.split('&').length > 1){\r\n            for(var i = 0; i < 2; i++){\r\n                arr[i] = url.split('&')[i].split('=')[1];\r\n            }\r\n            return arr;\r\n        }else{\r\n            arr[0] = location.hash.split('=')[1];\r\n            return arr;\r\n        }\r\n    }\r\n    function getHashByKey(key){\r\n        var obj = getHashParam(window.location.hash);\r\n        return obj[key];\r\n    }\r\n    function getHashParam(url){\r\n        var obj={};\r\n        var arr=[];\r\n        var reg = /[^&]+/g;\r\n        url = url.replace(/^#/,\"\");\r\n        if(url.length==0){\r\n            return obj;\r\n        }\r\n        arr = url.match(reg);\r\n        if(!arr){\r\n            return obj;\r\n        }\r\n        var temparr;\r\n        for(var i=0;i<arr.length;i++){\r\n            temparr=arr[i].split(\"=\");\r\n            if(temparr.length>1){\r\n                obj[temparr[0]]=temparr[1];\r\n            }else{\r\n                obj[temparr[0]]=\"\";\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    function saveParam2Cookei(str){\r\n        document.cookie=\"myhash=\"+str;\r\n    }\r\n    function getHashFromCookei(){\r\n        return getCookie(\"myhash\");\r\n    }\r\n    function getCookie(name) {\r\n        var arr, reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\r\n        if (arr = document.cookie.match(reg))\r\n            return arr[2];\r\n        else\r\n            return null;\r\n    }\r\n    function px2rem(px){\r\n        var rem=0;\r\n        var rootSize = parseFloat($(\"html\").css(\"font-size\").replace(\"px\",\"\"));\r\n        rem = px/rootSize;\r\n        return rem;\r\n    }\r\n    //写入LocalStorage\r\n    function setLocalStorage(key,value){\r\n        localStorage[\"lydj_dota2_\"+key]=value;\r\n    }\r\n    //读取LocalStorage\r\n    function getLocalStorage(key){\r\n        return localStorage[\"lydj_dota2_\"+key]\r\n    }\r\n    function removeLocalStorage(key) {\r\n        localStorage.removeItem(\"lydj_dota2_\"+key);\r\n    }\r\n\r\n    return {\r\n        connectServer: connectServer,\r\n        cookieServer: cookieServer,\r\n        ajax: ajax,\r\n        formatTime:formatTime,\r\n        newhash:newhash,\r\n        getParam: getParam,\r\n        urlConfig:urlConfig,\r\n        pngUrl:pngUrl,\r\n        px2rem:px2rem,\r\n        saveParam2Cookei:saveParam2Cookei,\r\n        getHashFromCookei:getHashFromCookei,\r\n        getHashParam:getHashParam,\r\n        ls:{getLs:getLocalStorage,\r\n            setLs:setLocalStorage,\r\n            rmItem:removeLocalStorage\r\n        },\r\n        getHashByKey:getHashByKey,\r\n        dom13322:domobj.dom13322\r\n    }\r\n\r\n    var liveUrl = \"//live.\"+ moudle.dom13322 +\".com/\";\r\n\r\n    function lg(str){\r\n        if(arguments.length==0){\r\n            return \"\";\r\n        }\r\n        if(arguments.length==1){\r\n            return str;\r\n        }\r\n        var reg= /\\{\\d+\\}/g;\r\n        var strArr =  str.match(reg);\r\n        for(var i=0;i<strArr.length;i++){\r\n            strArr[i]=Number(strArr[i].replace(/\\{|\\}/g,\"\"));\r\n            str = str.replace(\"{\"+strArr[i]+\"}\",arguments[1+strArr[i]]);\r\n        }\r\n        return str;\r\n    }\r\n})()\r\n//# sourceMappingURL=../maps/common.js.map\r\n"]}